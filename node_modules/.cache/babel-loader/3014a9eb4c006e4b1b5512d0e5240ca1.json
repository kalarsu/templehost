{"ast":null,"code":"import _classCallCheck from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chisu/Sites/templehost/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../css/styles.css';import HostHeader from'./HostHeader';import HostSummary from'./HostSummary';import HostAttendantSummary from'./HostAttendantSummary';import HostAttendRate from'./HostAttendRate';import HostAttendantByTemple from'./HostAttendantByTemple';import{findIndex,without}from'lodash';import ClassAttendRate from'./ClassAttendRate';import ClassAttendList from'./ClassAttendList';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.state={event:\"\",eventYear:\"\",eventName:\"\",eventDate:\"\",classMemberText:\"\",tolRquired:0,tolSignin:0,tolSigninHost:0,tolSigninAHost:0,tolSigninDeClass:0,tolSigninOthers:0,tolSigninClassMember:0,age:0,gender:\"\",tolMale:0,tolFemale:0,tolBoy:0,tolGirl:0,requiredArr:[],signinArr:[],zanDe:[],henDe:[],tonDe:[],zenDe:[],zuDe:[],minDe:[],sanDe:[],hanDe:[],zanWa:[],otherTemple:[],requiredObj:{},signinObj:{},vowToBeObj:{},classMember:\"\",zanDeReq:0,henDeReq:0,tonDeReq:0,zenDeReq:0,zuDeReq:0,minDeReq:0,sanDeReq:0,hanDeReq:0,zanWaReq:0,othersReq:0,zanDeSignin:0,henDeSignin:0,tonDeSignin:0,zenDeSignin:0,zuDeSignin:0,minDeSignin:0,sanDeSignin:0,hanDeSignin:0,zanWaSignin:0,othersSignin:0,templeList:[],vow:[\"辦事人員\",\"\",\"\",\"\",\"\"],templeClassSummaryObj:[[\"zanDe\",\"沾德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],//[\"新民\",tolReq,rolSignin] etc\n[\"henDe\",\"恆德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"tonDe\",\"同德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"zenDe\",\"正德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"zuDe\",\"儒德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"minDe\",\"明德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"sanDe\",\"聖德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"hanDe\",\"涵德\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"zanWa\",\"贊化\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]],[\"others\",\"其它\",[[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0],[\"\",0,0]]]],classMemberObj:{\"xingMing\":[],\"zhiShan\":[],\"peiDe\":[],\"xingDe\":[],\"chongDe\":[]},classVowObj:{\"xingMing\":\"辦事人員\",\"zhiShan\":\"講員\",\"peiDe\":\"\",\"xingDe\":\"\",\"chongDe\":\"\"},classSummaryArr:[[\"新民\",\"xingMing\",0,0,0,0],[\"至善\",\"zhiShan\",0,0,0,0],[\"培德\",\"peiDe\",0,0,0,0],[\"行德\",\"xingDe\",0,0,0,0],[\"崇德\",\"chongDe\",0,0,0,0]//tolReq乾，tolReq坤, tolSignin乾，tolSign坤\t\n]// classListObj: {\"新民班\": 0, \"至善班\": 1, \"培德班\": 2, \"行德班\": 3, \"崇德班\": 4}\n};_this.getTempleList=_this.getTempleList.bind(_assertThisInitialized(_this));_this.getUrlParam=_this.getUrlParam.bind(_assertThisInitialized(_this));_this.getJsonData=_this.getJsonData.bind(_assertThisInitialized(_this));_this.getDataSource=_this.getDataSource.bind(_assertThisInitialized(_this));_this.checkVows=_this.checkVows.bind(_assertThisInitialized(_this));_this.getVowsName=_this.getVowsName.bind(_assertThisInitialized(_this));_this.checkIfSignin=_this.checkIfSignin.bind(_assertThisInitialized(_this));_this.checkIfRequired=_this.checkIfRequired.bind(_assertThisInitialized(_this));_this.checkIfClassMember=_this.checkIfClassMember.bind(_assertThisInitialized(_this));_this.checkTempleId=_this.checkTempleId.bind(_assertThisInitialized(_this));_this.jsonToObj=_this.jsonToObj.bind(_assertThisInitialized(_this));_this.checkGradClass=_this.checkGradClass.bind(_assertThisInitialized(_this));_this.genAttendanceSummary=_this.genAttendanceSummary.bind(_assertThisInitialized(_this));_this.genReqListByTemple=_this.genReqListByTemple.bind(_assertThisInitialized(_this));//class member\n//this.updateClassSummaryByTemple = this.updateClassSummaryByTemple.bind(this);\nreturn _this;}_createClass(App,[{key:\"genReqListByTemple\",value:function genReqListByTemple(){var _this2=this;var signin,required,id,name,gender,temple,vow,gradClass,notClassMemberCount=0;var _requiredArr=this.state.requiredArr;var _signinArr=this.state.signinArr;var _templeList=this.state.templeList;var _templeId;var classMember=this.state.classMember;//console.log(\"classMember=\" + classMember);\n_signinArr.forEach(function(element,index){//check signIn hosts, but not in required list\nid=element[0];name=element[1];gender=element[2];temple=element[3];vow=element[4];gradClass=element[5];required=_this2.checkIfRequired(id);if(temple!==undefined){_templeId=_this2.checkTempleId(temple.substring(0,2));}else{_templeId=9;//其它單位\n}if(_this2.checkIfClassMember(vow,gradClass)&&required===\"no\"){notClassMemberCount++;//console.log(\"classMember=\" + classMember);\n//if(classMember !== \"class-member\"){\nconsole.log(\"====Signin hosts, but not in required list:\"+index+\",name=\"+name+\", vow=\"+vow+\", temple=\"+temple+\", gradClass=\"+gradClass);//}\n}if(!_this2.checkIfClassMember(vow,gradClass)){notClassMemberCount++;//if(classMember !== \"class-member\"){\nconsole.log(\"====Signin hosts, but not class member:\"+index+\",name=\"+name+\", vow=\"+vow+\", temple=\"+temple+\", gradClass=\"+gradClass);//}\n_templeList[_templeId][\"tolOthers\"]++;}if(classMember===\"class-member\"){if(vow===\"1master\"||vow===\"2lecturer\"||vow===\"3host\"){_templeList[_templeId][\"tolHost\"]++;_this2.setState({tolSigninHost:_this2.state.tolSigninHost+1});}if(vow===\"4ahost\"){_templeList[_templeId][\"tolAHost\"]++;_this2.setState({tolSigninAHost:_this2.state.tolSigninAHost+1});}if(vow===\"5declass\"){_templeList[_templeId][\"tolDeclass\"]++;_this2.setState({tolSigninDeClass:_this2.state.tolSigninDeClass+1});}}});this.setState({tolSigninOthers:notClassMemberCount});_requiredArr.forEach(function(element,index){id=element[0];name=element[1];gender=element[2];temple=element[3];vow=element[4];signin=_this2.checkIfSignin(id);gradClass=element[5];//console.log(\"id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin);\nif(temple!==undefined){_templeId=_this2.checkTempleId(temple.substring(0,2));}else{_templeId=9;//其它單位\n}//console.log(\"templeInof=\" + _templeList[_templeId][\"templeName\"]);\nif(_this2.checkIfClassMember(vow,gradClass)){_templeList[_templeId][\"tolReq\"]++;if(signin===\"yes\"){_templeList[_templeId][\"tolSignin\"]++;if(classMember!==\"class-member\"){//console.log(\"---id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin + \", gradClass=\"+ gradClass);\nif(vow===\"1master\"||vow===\"2lecturer\"||vow===\"3host\"){_templeList[_templeId][\"tolHost\"]++;_this2.setState({tolSigninHost:_this2.state.tolSigninHost+1});_this2.setState({tolSigninClassMember:_this2.state.tolSigninClassMember+1});}if(vow===\"4ahost\"){_templeList[_templeId][\"tolAHost\"]++;_this2.setState({tolSigninAHost:_this2.state.tolSigninAHost+1});_this2.setState({tolSigninClassMember:_this2.state.tolSigninClassMember+1});}if(vow===\"5declass\"){_templeList[_templeId][\"tolDeclass\"]++;_this2.setState({tolSigninDeClass:_this2.state.tolSigninDeClass+1});if(classMember===\"hosts-declass\")_this2.setState({tolSigninClassMember:_this2.state.tolSigninClassMember+1});}}else if(gradClass!==undefined&&gradClass!==\"\"){//畢班,人才提拔\n_this2.setState({tolSigninClassMember:_this2.state.tolSigninClassMember+1});}}}else{//not class member\n//if(vow===\"6others\")   _templeList[_templeId][\"tolOthers\"] ++;\n//console.log(\"Within requried list, but not class member=\" + name + \", vow=\" + vow + \", temple=\" + temple);\n}_templeList[_templeId][\"templeArr\"].push([id,name,gender,_this2.getVowsName(vow),signin]);_this2.setState({templeList:_templeList});});//end of forEach for _requiredAr\n}},{key:\"genAttendanceSummary\",value:function genAttendanceSummary(gender,name){switch(gender){case\"乾\":this.setState({tolMale:this.state.tolMale+1});break;case\"坤\":this.setState({tolFemale:this.state.tolFemale+1});break;case\"童\":this.setState({tolBoy:this.state.tolBoy+1});break;case\"女\":this.setState({tolGirl:this.state.tolGirl+1});break;default:console.log(\"! Gener not clear: \"+gender+\", name=\"+name);break;}this.setState({tolSignin:this.state.tolSignin+1});}},{key:\"getDataSource\",value:function getDataSource(){var _this3=this;var signUrl,reqUrl;var event=this.getUrlParam(\"event\");var eventYear=this.getUrlParam(\"eventYear\");this.setState({event:event});this.setState({eventYear:eventYear});if(event===\"temple\"){//Friday \nsignUrl=\"signin5-\"+eventYear;reqUrl=\"required5-\"+eventYear;this.setState({eventName:\"固本圖強班\",eventDate:\"05.01.2020\",classMemberText:\"壇主、講師、副壇主\",classMember:\"hosts\"});}else if(event===\"host\"){//Saturday\nsignUrl=\"signin6-\"+eventYear;reqUrl=\"required6-\"+eventYear;this.setState({eventName:\"壇主講師班\",eventDate:\"05.02.2020\",classMemberText:\"壇主、講師、副壇主、德字班道親\",classMember:\"hosts-declass\"});}else{//Sunday Class memeber\nsignUrl=\"signin7-\"+eventYear;reqUrl=\"required7-\"+eventYear;this.setState({eventName:\"畢班、人才提拔\",eventDate:\"05.03.2020\",classMemberText:eventYear+\" 年進修班畢班班員\",classMember:\"class-member\"});}//console.log(\"eventName=\"+ event);\nthis.getJsonData(signUrl,function(signindata){_this3.getJsonData(reqUrl,function(reqdata){_this3.jsonToObj(\"signin\",signindata,function(_dataObj){//must have signinObj created first, then later on can check if required class member sign in or not\n_this3.setState({signinObj:_dataObj});_this3.jsonToObj(\"required\",reqdata,function(_dataObj){_this3.setState({requiredObj:_dataObj});});});_this3.genReqListByTemple();});});}},{key:\"jsonToObj\",value:function jsonToObj(type,data,callback){var _this4=this;console.log(\"jsonToObj Type=\"+type);var classMember=\"\",dataObj={},dataArr=[],id,name,gender,temple,templeId,vow,gradClass,xingMing=[],zhiShan=[],peiDe=[],xingDe=[],chongDe=[],xingMingSum=this.state.classSummaryArr[0],//[0,0,0,0] tolReqMale = 0, tolReqFemale = 0, tolSigninMale = 0, tolSigninFemale = 0,\nzhiShanSum=this.state.classSummaryArr[1],peiDeSum=this.state.classSummaryArr[2],xingDeSum=this.state.classSummaryArr[3],chongDeSum=this.state.classSummaryArr[4],classMemberObj={},classSummaryArr=[],templeClassSummaryObj=this.state.templeClassSummaryObj;classMember=this.state.classMember;var result=data.map(function(item){id=item.id;name=item.name;gender=item.gender;temple=item.currentTemple;vow=_this4.checkVows(id,type,name,item.vows,item.taoClasses);gradClass=_this4.checkGradClass(name,item.taoClasses);if(temple==undefined){temple=\"其它\";console.log(\"! Name=\"+name+\"--has no temple assigned, assigned to 其它 for now.\");}temple=temple.substring(0,2);templeId=_this4.checkTempleId(temple);if(temple===\"崇慧\")temple=\"沾德\";//console.log(\"templeId=\" + templeId);\ndataObj[id]=[name,gender,temple,vow,gradClass];dataArr.push([id,name,gender,temple,vow,gradClass]);if(type===\"required\"){//班員出席統計 summary section only\n//console.log(id + \"-Checked?\" + this.checkIfSignin(id));\nif(classMember===\"hosts\"&&vow!==\"6others\"&&vow!==\"5declass\"){//Friday\n_this4.setState({tolRquired:_this4.state.tolRquired+1});}else if(classMember===\"hosts-declass\"&&vow!==\"6others\"){//Saturday hosts + declass\n_this4.setState({tolRquired:_this4.state.tolRquired+1});}else if(classMember===\"class-member\"&&gradClass!==undefined&&gradClass!==\"\"){// Sunday , only graducated class memeber\n_this4.setState({tolRquired:_this4.state.tolRquired+1});//form class memeber obj, and summary\n//console.log(\"gradClass=\" + gradClass);\nswitch(gradClass){case\"1xingMing\":xingMing.push([id,name,gender,temple,vow,gradClass,_this4.checkIfSignin(id)]);gender===\"乾\"?xingMingSum[2]++:xingMingSum[3]++;templeClassSummaryObj[templeId][2][0][0]=\"新民\";templeClassSummaryObj[templeId][2][0][1]++;break;case\"2zhiShan\":zhiShan.push([id,name,gender,temple,vow,gradClass,_this4.checkIfSignin(id)]);gender===\"乾\"?zhiShanSum[2]++:zhiShanSum[3]++;templeClassSummaryObj[templeId][2][1][0]=\"至善\";templeClassSummaryObj[templeId][2][1][1]++;break;case\"3peiDe\":peiDe.push([id,name,gender,temple,vow,gradClass,_this4.checkIfSignin(id)]);gender===\"乾\"?peiDeSum[2]++:peiDeSum[3]++;templeClassSummaryObj[templeId][2][2][0]=\"培德\";templeClassSummaryObj[templeId][2][2][1]++;break;case\"4xingDe\":xingDe.push([id,name,gender,temple,vow,gradClass,_this4.checkIfSignin(id)]);gender===\"乾\"?xingDeSum[2]++:xingDeSum[3]++;templeClassSummaryObj[templeId][2][3][0]=\"行德\";templeClassSummaryObj[templeId][2][3][1]++;break;case\"5chongDe\":chongDe.push([id,name,gender,temple,vow,gradClass,_this4.checkIfSignin(id)]);gender===\"乾\"?chongDeSum[2]++:chongDeSum[3]++;templeClassSummaryObj[templeId][2][4][0]=\"崇德\";templeClassSummaryObj[templeId][2][4][1]++;//console.log(\"required 崇德=\"+name);\nbreak;}}}else{//type === \"signin\"\n_this4.genAttendanceSummary(gender,name);// upate 活動人數統計 summary\nif(classMember===\"class-member\"&&gradClass!==undefined&&gradClass!==\"\"){// Sunday , only graducated class memeber\nswitch(gradClass){case\"1xingMing\":gender===\"乾\"?xingMingSum[4]++:xingMingSum[5]++;templeClassSummaryObj[templeId][2][0][0]=\"新民\";templeClassSummaryObj[templeId][2][0][2]++;break;case\"2zhiShan\":gender===\"乾\"?zhiShanSum[4]++:zhiShanSum[5]++;templeClassSummaryObj[templeId][2][1][0]=\"至善\";templeClassSummaryObj[templeId][2][1][2]++;break;case\"3peiDe\":gender===\"乾\"?peiDeSum[4]++:peiDeSum[5]++;templeClassSummaryObj[templeId][2][2][0]=\"培德\";templeClassSummaryObj[templeId][2][2][2]++;break;case\"4xingDe\":gender===\"乾\"?xingDeSum[4]++:xingDeSum[5]++;templeClassSummaryObj[templeId][2][3][0]=\"行德\";templeClassSummaryObj[templeId][2][3][2]++;break;case\"5chongDe\":gender===\"乾\"?chongDeSum[4]++:chongDeSum[5]++;templeClassSummaryObj[templeId][2][4][0]=\"崇德\";templeClassSummaryObj[templeId][2][4][2]++;//console.log(\"signin 崇德=\"+name);\nbreak;}}}});// end of map\nif(type===\"required\"){this.setState({requiredArr:dataArr});}else{this.setState({signinArr:dataArr});}if(classMember===\"class-member\"){if(type===\"required\"){classMemberObj.xingMing=xingMing;classMemberObj.zhiShan=zhiShan;classMemberObj.peiDe=peiDe;classMemberObj.xingDe=xingDe;classMemberObj.chongDe=chongDe;this.setState({classMemberObj:classMemberObj});this.setState({templeClassSummaryObj:templeClassSummaryObj});//console.log(\"classMemberObj=\" + JSON.stringify(classMemberObj));\n// console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n}classSummaryArr[0]=xingMingSum;classSummaryArr[1]=zhiShanSum;classSummaryArr[2]=peiDeSum;classSummaryArr[3]=xingDeSum;classSummaryArr[4]=chongDeSum;this.setState({classSummaryArr:classSummaryArr});this.setState({templeClassSummaryObj:templeClassSummaryObj});// console.log(\"classSummaryArr=\" + JSON.stringify(classSummaryArr));\n// console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n}//console.log(\"type:\" + type, \", inde:\"+ ++index + \", currObj=\"+dataObj[5]);\ncallback(dataObj);}},{key:\"checkIfSignin\",value:function checkIfSignin(id){//console.log(\"id=\"+id);\nvar _signinObj=this.state.signinObj;return _signinObj[id]&&_signinObj[id]!==undefined?\"yes\":\"x\";}},{key:\"checkIfRequired\",value:function checkIfRequired(id){var _requiredObj=this.state.requiredObj;return _requiredObj[id]&&_requiredObj[id]!==undefined?\"yes\":\"no\";}},{key:\"checkIfClassMember\",value:function checkIfClassMember(vow,gradeClass){var classMember=this.state.classMember;if(classMember===\"hosts\"&&vow!==\"5declass\"&&vow!==\"6others\"||classMember===\"hosts-declass\"&&vow!==\"6others\"||classMember===\"class-member\"&&gradeClass!==\"\"&&gradeClass!==undefined){return true;}else{return false;}}},{key:\"checkVows\",value:function checkVows(id,type,name,vows,taoClasses){if(vows){if(vows[\"transmittingMaster\"]){if(vows[\"transmittingMaster\"].made===true){//if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\nreturn\"1master\";};}if(vows[\"lecturer\"]){if(vows[\"lecturer\"].made===true){//if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\nreturn\"2lecturer\";};}if(vows[\"templeHost\"]){if(vows[\"templeHost\"].made===true){//if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\nreturn\"3host\";};}if(vows[\"assistantTempleHost\"]){if(vows[\"assistantTempleHost\"].made===true){//if(type===\"signin\") this.setState({ tolSigninAHost: this.state.tolSigninAHost +1});\nreturn\"4ahost\";};}}if(taoClasses){if(taoClasses.chongDe&&taoClasses.chongDe.completed===true||taoClasses.xingDe&&taoClasses.xingDe.completed===true||taoClasses.peiDe&&taoClasses.peiDe.completed===true){//if(type===\"signin\") this.setState({ tolSigninDeClass: this.state.tolSigninDeClass +1});\nreturn\"5declass\";}else{//others \n//if(type===\"signin\") this.setState({ tolSigninOthers: this.state.tolSigninOthers +1});\nreturn\"6others\";}}console.log(\"no vow nor declass\"+name+\": \"+vows,taoClasses);return false;}},{key:\"getVowsName\",value:function getVowsName(vow){switch(vow){case\"1master\":return\"1點傳師\";case\"2lecturer\":return\"2壇主、講師\";case\"3host\":return\"3壇主\";case\"4ahost\":return\"4副壇主\";case\"5declass\":return\"5德字班\";default:return\"6其他\";}}},{key:\"checkGradClass\",value:function checkGradClass(name,taoClasses){var eventYear=this.state.eventYear;var gradClass=\"\";if(taoClasses){if(taoClasses.chongDe&&taoClasses.chongDe.completed===true&&taoClasses.chongDe.completionDate&&taoClasses.chongDe.completionDate.substr(0,10).includes(eventYear)){gradClass=\"5chongDe\";}else if(taoClasses.xingDe&&taoClasses.xingDe.completed===true&&taoClasses.xingDe.completionDate&&taoClasses.xingDe.completionDate.substr(0,10).includes(eventYear)){gradClass=\"4xingDe\";}else if(taoClasses.peiDe&&taoClasses.peiDe.completed===true&&taoClasses.peiDe.completionDate&&taoClasses.peiDe.completionDate.substr(0,10).includes(eventYear)){gradClass=\"3peiDe\";}else if(taoClasses.zhiShan&&taoClasses.zhiShan.completed===true&&taoClasses.zhiShan.completionDate&&taoClasses.zhiShan.completionDate.substr(0,10).includes(eventYear)){gradClass=\"2zhiShan\";}else if(taoClasses.xingMing&&taoClasses.xingMing.completed===true&&taoClasses.xingMing.completionDate&&taoClasses.xingMing.completionDate.substr(0,10).includes(eventYear)){gradClass=\"1xingMing\";}else{//others \ngradClass=\"\";}}else{console.log(\"no grad lass\"+name+\": \",taoClasses);gradClass=\"\";}// if(name==\"胡艷蘭\") {\n//   console.log(\"name=\" + name + \", taoClasses=\" + JSON.stringify(taoClasses));\n//   console.log(\"taoClasses.peiDe:\"+taoClasses.peiDe);\n//   console.log(\"taoClasses.peiDe.completed=\"+taoClasses.peiDe.completed);\n//   console.log(\"taoClasses.peiDe.completionDate:\"+taoClasses.peiDe.completionDate);\n//   console.log(taoClasses.peiDe.completionDate.substr(0, 10));\n//   console.log(taoClasses.peiDe.completionDate.substr(0, 10).includes(eventYear));\n//   console.log(\"gradClass=\"+ gradClass);\n// }\nreturn gradClass;}},{key:\"checkTempleId\",value:function checkTempleId(name){switch(name){case\"沾德\":return 0;break;case\"恆德\":return 1;break;case\"同德\":return 2;break;case\"正德\":return 3;break;case\"儒德\":return 4;break;case\"明德\":return 5;break;case\"聖德\":return 6;case\"涵德\":return 7;break;case\"贊化\":return 8;break;case\"其它\":return 9;break;default:return 9;break;}}},{key:\"getUrlParam\",value:function getUrlParam(parameter){var getAction=\"\",url=\"\";url=new URLSearchParams(window.location.search);getAction=url.get(parameter);if(getAction===null){alert(\"You forgot to enter event type in the URL parameter! This page wont be generating correct data! Enter ex: ?event=temple, host, class\");}else{return getAction;}}},{key:\"getJsonData\",value:function getJsonData(_url,callback){console.log(\"Json _url=\"+_url);fetch('./json/'+_url+'.json').then(function(response){return response.json();}).then(function(result){callback(result);});}},{key:\"getTempleList\",value:function getTempleList(){var _this5=this;fetch('./json/templeList.json').then(function(response){return response.json();}).then(function(result){var tempList=result.map(function(item){return item;});_this5.setState({templeList:tempList});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getDataSource();this.getTempleList();}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{id:\"host-class\",className:\"main-container event-name\"},React.createElement(HostHeader,{eventName:this.state.eventName,eventDate:this.state.eventDate,classMemberText:this.state.classMemberText}),React.createElement(HostSummary,{event:this.state.event,tolRquired:this.state.tolRquired,tolSigninClassMember:this.state.tolSigninClassMember,tolSigninHost:this.state.tolSigninHost,tolSigninAHost:this.state.tolSigninAHost,tolSigninDeClass:this.state.tolSigninDeClass,classSummaryArr:this.state.classSummaryArr}),React.createElement(HostAttendantSummary,{eventType:this.state.classMember,tolSignin:this.state.tolSignin,tolAdult:this.state.tolMale+this.state.tolFemale,tolChildren:this.state.tolBoy+this.state.tolGirl,tolMale:this.state.tolMale,tolFemale:this.state.tolFemale,tolBoy:this.state.tolBoy,tolGirl:this.state.tolGirl,tolSigninOthers:this.state.tolSigninOthers})),React.createElement(HostAttendRate,{templeList:this.state.templeList,requiredArr:this.state.requiredArr,tolSignin:this.state.tolSignin}),React.createElement(\"hr\",null),React.createElement(ClassAttendRate,{event:this.state.event,templeClassSummaryObj:this.state.templeClassSummaryObj}),React.createElement(\"hr\",null),React.createElement(ClassAttendList,{event:this.state.event,eventYear:this.state.eventYear,templeClassSummaryObj:this.state.templeClassSummaryObj,classSummaryArr:this.state.classSummaryArr,classMemberObj:this.state.classMemberObj}),React.createElement(\"hr\",null),React.createElement(HostAttendantByTemple,{templeList:this.state.templeList}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/chisu/Sites/templehost/src/components/App.js"],"names":["React","Component","HostHeader","HostSummary","HostAttendantSummary","HostAttendRate","HostAttendantByTemple","findIndex","without","ClassAttendRate","ClassAttendList","App","state","event","eventYear","eventName","eventDate","classMemberText","tolRquired","tolSignin","tolSigninHost","tolSigninAHost","tolSigninDeClass","tolSigninOthers","tolSigninClassMember","age","gender","tolMale","tolFemale","tolBoy","tolGirl","requiredArr","signinArr","zanDe","henDe","tonDe","zenDe","zuDe","minDe","sanDe","hanDe","zanWa","otherTemple","requiredObj","signinObj","vowToBeObj","classMember","zanDeReq","henDeReq","tonDeReq","zenDeReq","zuDeReq","minDeReq","sanDeReq","hanDeReq","zanWaReq","othersReq","zanDeSignin","henDeSignin","tonDeSignin","zenDeSignin","zuDeSignin","minDeSignin","sanDeSignin","hanDeSignin","zanWaSignin","othersSignin","templeList","vow","templeClassSummaryObj","classMemberObj","classVowObj","classSummaryArr","getTempleList","bind","getUrlParam","getJsonData","getDataSource","checkVows","getVowsName","checkIfSignin","checkIfRequired","checkIfClassMember","checkTempleId","jsonToObj","checkGradClass","genAttendanceSummary","genReqListByTemple","signin","required","id","name","temple","gradClass","notClassMemberCount","_requiredArr","_signinArr","_templeList","_templeId","forEach","element","index","undefined","substring","console","log","setState","push","signUrl","reqUrl","signindata","reqdata","_dataObj","type","data","callback","dataObj","dataArr","templeId","xingMing","zhiShan","peiDe","xingDe","chongDe","xingMingSum","zhiShanSum","peiDeSum","xingDeSum","chongDeSum","result","map","item","currentTemple","vows","taoClasses","_signinObj","_requiredObj","gradeClass","made","completed","completionDate","substr","includes","parameter","getAction","url","URLSearchParams","window","location","search","get","alert","_url","fetch","then","response","json","tempList"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/styles.css';\nimport HostHeader from './HostHeader';\nimport HostSummary from './HostSummary';\nimport HostAttendantSummary from './HostAttendantSummary';\nimport HostAttendRate from './HostAttendRate';\nimport HostAttendantByTemple from './HostAttendantByTemple';\nimport {findIndex, without} from 'lodash';\nimport ClassAttendRate from './ClassAttendRate';\nimport ClassAttendList from './ClassAttendList';\n\nclass App extends Component{\n  constructor(){\n    super();\n    this.state = {\n      event: \"\", eventYear: \"\", eventName: \"\", eventDate: \"\", classMemberText: \"\",\n      tolRquired : 0, tolSignin : 0, tolSigninHost : 0, tolSigninAHost : 0,\n      tolSigninDeClass : 0, tolSigninOthers : 0, tolSigninClassMember : 0,\n      age : 0, gender : \"\", tolMale : 0, tolFemale : 0 , tolBoy : 0, tolGirl : 0,\n      requiredArr: [], signinArr: [],\n      zanDe: [], henDe: [], tonDe: [], zenDe: [], zuDe: [], minDe: [], sanDe: [], \n      hanDe: [], zanWa: [],otherTemple: [], \n      requiredObj: {}, signinObj: {}, vowToBeObj: {},\n      classMember: \"\", \n      zanDeReq: 0, henDeReq: 0, tonDeReq: 0, zenDeReq: 0, zuDeReq: 0, minDeReq: 0,\n      sanDeReq: 0, hanDeReq: 0, zanWaReq: 0, othersReq: 0,\n      zanDeSignin: 0, henDeSignin: 0, tonDeSignin: 0, zenDeSignin: 0, zuDeSignin: 0,\n      minDeSignin: 0, sanDeSignin: 0, hanDeSignin: 0, zanWaSignin: 0, othersSignin: 0,\n      templeList: [], vow: [\"辦事人員\", \"\", \"\", \"\", \"\"],\n      templeClassSummaryObj:[\n        [\"zanDe\", \"沾德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]], //[\"新民\",tolReq,rolSignin] etc\n\t\t\t\t[\"henDe\", \"恆德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"tonDe\", \"同德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"zenDe\", \"正德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"zuDe\",  \"儒德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"minDe\", \"明德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"sanDe\", \"聖德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"hanDe\", \"涵德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"zanWa\", \"贊化\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"others\",\"其它\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n      ],\n      classMemberObj: {\n\t\t\t\t\"xingMing\": [],\n\t\t\t\t\"zhiShan\": [],\n\t\t\t\t\"peiDe\": [],\n\t\t\t\t\"xingDe\": [],\n\t\t\t\t\"chongDe\": []\n      },\n      classVowObj: {\n\t\t\t\t\"xingMing\": \"辦事人員\",\n\t\t\t\t\"zhiShan\": \"講員\",\n\t\t\t\t\"peiDe\": \"\",\n\t\t\t\t\"xingDe\": \"\",\n\t\t\t\t\"chongDe\": \"\"\n      },\n      classSummaryArr:[\n\t\t\t\t[\"新民\",\"xingMing\",0,0,0,0],\n\t\t\t\t[\"至善\",\"zhiShan\",0,0,0,0],\n\t\t\t\t[\"培德\",\"peiDe\",0,0,0,0],\n\t\t\t\t[\"行德\",\"xingDe\",0,0,0,0],\n\t\t\t\t[\"崇德\",\"chongDe\",0,0,0,0] //tolReq乾，tolReq坤, tolSignin乾，tolSign坤\t\n      ]\n      \n      // classListObj: {\"新民班\": 0, \"至善班\": 1, \"培德班\": 2, \"行德班\": 3, \"崇德班\": 4}\n    }\n    \n    this.getTempleList = this.getTempleList.bind(this);\n    this.getUrlParam = this.getUrlParam.bind(this);\n    this.getJsonData = this.getJsonData.bind(this);\n    this.getDataSource = this.getDataSource.bind(this);\n    this.checkVows = this.checkVows.bind(this);\n    this.getVowsName = this.getVowsName.bind(this);\n    this.checkIfSignin = this.checkIfSignin.bind(this);\n    this.checkIfRequired = this.checkIfRequired.bind(this);\n    this.checkIfClassMember = this.checkIfClassMember.bind(this);\n    this.checkTempleId = this.checkTempleId.bind(this);\n    this.jsonToObj = this.jsonToObj.bind(this);\n    this.checkGradClass = this.checkGradClass.bind(this);\n    this.genAttendanceSummary = this.genAttendanceSummary.bind(this);\n    this.genReqListByTemple = this.genReqListByTemple.bind(this);\n\n    //class member\n    //this.updateClassSummaryByTemple = this.updateClassSummaryByTemple.bind(this);\n  }\n\n  genReqListByTemple(){\n    let signin, required, id, name, gender, temple, vow, gradClass, notClassMemberCount=0;\n    const _requiredArr = this.state.requiredArr;\n    const _signinArr = this.state.signinArr;\n    let _templeList = this.state.templeList;\n    let _templeId;\n    let classMember = this.state.classMember;\n    //console.log(\"classMember=\" + classMember);\n\n    _signinArr.forEach((element, index)=>{ //check signIn hosts, but not in required list\n      id = element[0];\n\t\t\tname = element[1];\n\t\t\tgender = element[2];\n\t\t\ttemple = element[3];\n      vow = element[4];\n      gradClass = element[5];\n\n      required = this.checkIfRequired(id);\n      if (temple !== undefined){\n        _templeId = this.checkTempleId(temple.substring(0,2));\n      }else{\n        _templeId = 9; //其它單位\n      }\n\n      if(this.checkIfClassMember(vow, gradClass) && required ===\"no\") {\n        notClassMemberCount ++;\n        //console.log(\"classMember=\" + classMember);\n        //if(classMember !== \"class-member\"){\n          console.log(\"====Signin hosts, but not in required list:\" + index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\"+gradClass);\n        //}\n      }\n      \n      if(!this.checkIfClassMember(vow, gradClass)){\n        notClassMemberCount++;\n        //if(classMember !== \"class-member\"){\n          console.log(\"====Signin hosts, but not class member:\" + index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\"+gradClass);\n        //}\n        _templeList[_templeId][\"tolOthers\"] ++;\n      }\n      \n      if(classMember === \"class-member\"){\n        if(vow===\"1master\" || vow===\"2lecturer\" || vow===\"3host\") {\n          _templeList[_templeId][\"tolHost\"] ++;\n          this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n        }\n        if(vow===\"4ahost\"){\n          _templeList[_templeId][\"tolAHost\"] ++;\n          this.setState({ tolSigninAHost: this.state.tolSigninAHost+1});\n        }\n        if(vow===\"5declass\"){\n          _templeList[_templeId][\"tolDeclass\"] ++;\n          this.setState({ tolSigninDeClass: this.state.tolSigninDeClass+1});\n        }\n      }\n    });\n\n    this.setState({ tolSigninOthers: notClassMemberCount});\n\n    _requiredArr.forEach( (element, index) => {\n      id = element[0];\n\t\t\tname = element[1];\n\t\t\tgender = element[2];\n\t\t\ttemple = element[3];\n      vow = element[4];\n      signin = this.checkIfSignin(id);\n      gradClass = element[5];\n      //console.log(\"id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin);\n      \n      if (temple !== undefined){\n        _templeId = this.checkTempleId(temple.substring(0,2));\n      }else{\n        _templeId = 9; //其它單位\n      }\n        \n      //console.log(\"templeInof=\" + _templeList[_templeId][\"templeName\"]);\n      if (this.checkIfClassMember(vow, gradClass)) {\n        _templeList[_templeId][\"tolReq\"] ++ ;\n        if(signin === \"yes\"){\n          _templeList[_templeId][\"tolSignin\"] ++;\n\n          if(classMember !== \"class-member\"){ \n            //console.log(\"---id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin + \", gradClass=\"+ gradClass);\n            if(vow===\"1master\" || vow===\"2lecturer\" || vow===\"3host\") {\n              _templeList[_templeId][\"tolHost\"] ++;\n              this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n              this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n            if(vow===\"4ahost\"){\n              _templeList[_templeId][\"tolAHost\"] ++;\n              this.setState({ tolSigninAHost: this.state.tolSigninAHost+1});\n              this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n            if(vow===\"5declass\"){\n              _templeList[_templeId][\"tolDeclass\"] ++;\n              this.setState({ tolSigninDeClass: this.state.tolSigninDeClass+1});\n              if(classMember ===\"hosts-declass\") this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n          }else if(gradClass!==undefined && gradClass!==\"\"){ //畢班,人才提拔\n            this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n          }\n        } \n      }else{ //not class member\n        //if(vow===\"6others\")   _templeList[_templeId][\"tolOthers\"] ++;\n        //console.log(\"Within requried list, but not class member=\" + name + \", vow=\" + vow + \", temple=\" + temple);\n      }\n\n      _templeList[_templeId][\"templeArr\"].push([id, name, gender, this.getVowsName(vow), signin]);\n\n      this.setState({\n        templeList: _templeList\n      });\n    });//end of forEach for _requiredAr\n    \n  }\n\n  genAttendanceSummary(gender, name){\n    switch(gender){\n      case \"乾\":\n        this.setState({tolMale: this.state.tolMale +1});\n        break;\n      case \"坤\":\n        this.setState({tolFemale: this.state.tolFemale +1});\n        break;\n      case \"童\":\n        this.setState({tolBoy: this.state.tolBoy +1});\n        break;\n      case \"女\":\n        this.setState({tolGirl: this.state.tolGirl +1});\n        break;\n      default:\n        console.log(\"! Gener not clear: \" + gender + \", name=\" + name);\n        break;\n    }\n    this.setState({tolSignin: this.state.tolSignin +1});\n  }\n\n  getDataSource(){\n    let signUrl, reqUrl;\n    const event = this.getUrlParam(\"event\");\n    const eventYear = this.getUrlParam(\"eventYear\");\n    this.setState({event: event});\n    this.setState({eventYear: eventYear});\n\n\t\tif( event === \"temple\" ){ //Friday \n\t\t\tsignUrl = \"signin5-\" + eventYear;\n\t\t\treqUrl = \"required5-\" + eventYear;\n\t\t\tthis.setState({\n        eventName: \"固本圖強班\",\n        eventDate: \"05.01.2020\",\n        classMemberText: \"壇主、講師、副壇主\",\n        classMember: \"hosts\"\n      });\n\t\t}else if(event === \"host\"){ //Saturday\n\t\t\tsignUrl = \"signin6-\" + eventYear;\n\t\t\treqUrl = \"required6-\" + eventYear;\n\t\t\tthis.setState({\n        eventName: \"壇主講師班\",\n        eventDate: \"05.02.2020\",\n        classMemberText: \"壇主、講師、副壇主、德字班道親\",\n        classMember: \"hosts-declass\"\n      });\n\t\t}else{ //Sunday Class memeber\n\t\t\tsignUrl = \"signin7-\" + eventYear;\n\t\t\treqUrl = \"required7-\" + eventYear;\n      this.setState({\n        eventName: \"畢班、人才提拔\",\n        eventDate: \"05.03.2020\",\n        classMemberText: eventYear + \" 年進修班畢班班員\",\n        classMember: \"class-member\"\n      });\n    }\n    //console.log(\"eventName=\"+ event);\n\n    this.getJsonData(signUrl, (signindata) => {\n      this.getJsonData(reqUrl, (reqdata)=> {\n\n        this.jsonToObj(\"signin\",signindata, (_dataObj)=>{\n          //must have signinObj created first, then later on can check if required class member sign in or not\n          this.setState({\n            signinObj: _dataObj\n          });\n          this.jsonToObj(\"required\",reqdata, (_dataObj)=>{\n            this.setState({\n              requiredObj: _dataObj\n            });\n          });\n        });\n        this.genReqListByTemple();\n\n      });\n    });\n  }\n\n  jsonToObj(type, data, callback){\n    console.log(\"jsonToObj Type=\" + type);\n\n    let classMember= \"\", dataObj={}, dataArr=[], \n        id, name, gender, temple, templeId, vow, gradClass, \n        xingMing=[], zhiShan=[],peiDe=[], xingDe=[], chongDe=[],\n        xingMingSum = this.state.classSummaryArr[0], //[0,0,0,0] tolReqMale = 0, tolReqFemale = 0, tolSigninMale = 0, tolSigninFemale = 0,\n        zhiShanSum = this.state.classSummaryArr[1],\n        peiDeSum = this.state.classSummaryArr[2],\n        xingDeSum = this.state.classSummaryArr[3],\n        chongDeSum = this.state.classSummaryArr[4],\n        classMemberObj={},classSummaryArr=[], \n        templeClassSummaryObj=this.state.templeClassSummaryObj;    \n        classMember = this.state.classMember;\n\n    const result = data.map( item => {\n      id = item.id;\n\t\t\tname = item.name;\n\t\t\tgender = item.gender;\n      temple = item.currentTemple;\n      vow = this.checkVows(id, type, name, item.vows, item.taoClasses);\n      gradClass = this.checkGradClass(name, item.taoClasses);\n      \n      if(temple==undefined) {\n        temple = \"其它\";\n        console.log(\"! Name=\" + name + \"--has no temple assigned, assigned to 其它 for now.\");\n      }\n      temple = temple.substring(0,2);\n      templeId = this.checkTempleId(temple);\n      if (temple===\"崇慧\") temple = \"沾德\";\n      //console.log(\"templeId=\" + templeId);\n      dataObj[id] = [name, gender, temple, vow, gradClass];\n      dataArr.push([id, name, gender, temple, vow, gradClass]);\n\n      if(type ===\"required\") { //班員出席統計 summary section only\n        //console.log(id + \"-Checked?\" + this.checkIfSignin(id));\n        if(classMember===\"hosts\" && vow !== \"6others\" && vow !== \"5declass\"){ //Friday\n          this.setState({tolRquired: this.state.tolRquired +1});\n        }else if(classMember ===\"hosts-declass\" && vow !== \"6others\"){ //Saturday hosts + declass\n          this.setState({tolRquired: this.state.tolRquired +1});\n        }else if(classMember===\"class-member\" && gradClass!==undefined && gradClass!==\"\"){// Sunday , only graducated class memeber\n          this.setState({tolRquired: this.state.tolRquired +1});\n          \n          //form class memeber obj, and summary\n          //console.log(\"gradClass=\" + gradClass);\n          switch(gradClass){\n            case \"1xingMing\":\n              xingMing.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id)]);\n              (gender===\"乾\") ? xingMingSum[2]++ : xingMingSum[3]++;\n              \n              templeClassSummaryObj[templeId][2][0][0]= \"新民\";\n              templeClassSummaryObj[templeId][2][0][1]++;\n              break;\n            case \"2zhiShan\":\n              zhiShan.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id)]);\n              (gender===\"乾\") ? zhiShanSum[2]++ : zhiShanSum[3]++;\n              templeClassSummaryObj[templeId][2][1][0]= \"至善\";\n              templeClassSummaryObj[templeId][2][1][1]++;\n              break;\n            case \"3peiDe\":\n              peiDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id)]);\n              (gender===\"乾\") ? peiDeSum[2]++ : peiDeSum[3]++;\n              templeClassSummaryObj[templeId][2][2][0]= \"培德\";\n              templeClassSummaryObj[templeId][2][2][1]++;\n              break;\n            case \"4xingDe\":\n              xingDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id)]);\n              (gender===\"乾\") ? xingDeSum[2]++ : xingDeSum[3]++;\n              templeClassSummaryObj[templeId][2][3][0]= \"行德\";\n              templeClassSummaryObj[templeId][2][3][1]++;\n              break;\n            case \"5chongDe\":\n              chongDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id)]);\n              (gender===\"乾\") ? chongDeSum[2]++ : chongDeSum[3]++;\n              templeClassSummaryObj[templeId][2][4][0]= \"崇德\";\n              templeClassSummaryObj[templeId][2][4][1]++;\n              //console.log(\"required 崇德=\"+name);\n              break;\n          }\n        }\n      }else{ //type === \"signin\"\n        this.genAttendanceSummary(gender, name); // upate 活動人數統計 summary\n\n        if(classMember===\"class-member\" && gradClass!==undefined && gradClass!==\"\"){// Sunday , only graducated class memeber\n          \n          switch(gradClass){\n            case \"1xingMing\":\n              (gender===\"乾\") ? xingMingSum[4]++ : xingMingSum[5]++;\n              templeClassSummaryObj[templeId][2][0][0]= \"新民\";\n              templeClassSummaryObj[templeId][2][0][2]++;\n              break;\n            case \"2zhiShan\":\n              (gender===\"乾\") ? zhiShanSum[4]++ : zhiShanSum[5]++;\n              templeClassSummaryObj[templeId][2][1][0]= \"至善\";\n              templeClassSummaryObj[templeId][2][1][2]++;\n              break;\n            case \"3peiDe\":\n              (gender===\"乾\") ? peiDeSum[4]++ : peiDeSum[5]++;\n              templeClassSummaryObj[templeId][2][2][0]= \"培德\";\n              templeClassSummaryObj[templeId][2][2][2]++;\n              break;\n            case \"4xingDe\":\n              (gender===\"乾\") ? xingDeSum[4]++ : xingDeSum[5]++;\n              templeClassSummaryObj[templeId][2][3][0]= \"行德\";\n              templeClassSummaryObj[templeId][2][3][2]++;\n              break;\n            case \"5chongDe\":\n              (gender===\"乾\") ? chongDeSum[4]++ : chongDeSum[5]++;\n              templeClassSummaryObj[templeId][2][4][0]= \"崇德\";\n              templeClassSummaryObj[templeId][2][4][2]++;\n              //console.log(\"signin 崇德=\"+name);\n              break;\n          }\n        }\n      }\n    }); // end of map\n    \n    if(type===\"required\"){\n      this.setState({requiredArr: dataArr});\n    }else{\n      this.setState({signinArr: dataArr});\n    }\n\n    if (classMember===\"class-member\"){\n      if(type===\"required\"){\n        classMemberObj.xingMing = xingMing;\n        classMemberObj.zhiShan = zhiShan;\n        classMemberObj.peiDe = peiDe;\n        classMemberObj.xingDe = xingDe;\n        classMemberObj.chongDe = chongDe;\n        this.setState({classMemberObj: classMemberObj});\n        this.setState({templeClassSummaryObj: templeClassSummaryObj});\n        //console.log(\"classMemberObj=\" + JSON.stringify(classMemberObj));\n        // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n      }\n      \n      classSummaryArr[0] = xingMingSum;\n      classSummaryArr[1] = zhiShanSum;\n      classSummaryArr[2] = peiDeSum;\n      classSummaryArr[3] = xingDeSum;\n      classSummaryArr[4] = chongDeSum;\n      this.setState({classSummaryArr: classSummaryArr});\n      this.setState({templeClassSummaryObj: templeClassSummaryObj});\n      // console.log(\"classSummaryArr=\" + JSON.stringify(classSummaryArr));\n      // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n    }\n\n    //console.log(\"type:\" + type, \", inde:\"+ ++index + \", currObj=\"+dataObj[5]);\n    callback(dataObj);\n  }\n\n  checkIfSignin(id){\n    //console.log(\"id=\"+id);\n    const _signinObj = this.state.signinObj;\n    return (_signinObj[id] && _signinObj[id] !== undefined) ? \"yes\" : \"x\";\n  }\n\n  checkIfRequired(id){\n    const _requiredObj = this.state.requiredObj;\n    return (_requiredObj[id] && _requiredObj[id] !== undefined) ? \"yes\" : \"no\";\n  }\n\n  checkIfClassMember(vow, gradeClass){\n    let classMember = this.state.classMember;\n    if ((classMember ===\"hosts\" && vow !== \"5declass\" && vow !== \"6others\") || \n        (classMember ===\"hosts-declass\" && vow !== \"6others\") ||\n        (classMember ===\"class-member\" && gradeClass !== \"\" && gradeClass!== undefined) \n       )\n    {\n      return true;\n    }else{\n      return false;\n    }\n  }\n\n  checkVows(id, type, name, vows, taoClasses){\n    if(vows){\n\t\t\tif(vows[\"transmittingMaster\"]){\n\t\t\t\tif(vows[\"transmittingMaster\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"1master\";\n        };\n\t\t\t}\n\t\t\tif(vows[\"lecturer\"]){\n\t\t\t\tif(vows[\"lecturer\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"2lecturer\";\n        };\n\t\t\t}\n      if(vows[\"templeHost\"]) {\n        if(vows[\"templeHost\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"3host\";\n        };\n      }\t\n      if(vows[\"assistantTempleHost\"]) {\n        if(vows[\"assistantTempleHost\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninAHost: this.state.tolSigninAHost +1});\n          return \"4ahost\";\n        };\n      }\n    }\n\n    if(taoClasses){\n      if( (taoClasses.chongDe && taoClasses.chongDe.completed === true) ||\n          (taoClasses.xingDe && taoClasses.xingDe.completed === true) ||\n          (taoClasses.peiDe && taoClasses.peiDe.completed === true) ) {\n        //if(type===\"signin\") this.setState({ tolSigninDeClass: this.state.tolSigninDeClass +1});\n        return \"5declass\";\n      }else{ //others \n        //if(type===\"signin\") this.setState({ tolSigninOthers: this.state.tolSigninOthers +1});\n        return \"6others\";\n      }\n    }\n\t\tconsole.log(\"no vow nor declass\" + name + \": \" + vows , taoClasses);\n\t\treturn false;\n  }\n\n  getVowsName(vow){\n    switch(vow){\n      case \"1master\":\n        return \"1點傳師\";\n      case \"2lecturer\":\n        return \"2壇主、講師\";\n      case \"3host\":\n        return \"3壇主\";\n      case \"4ahost\":\n        return \"4副壇主\";\n      case \"5declass\":\n        return \"5德字班\";\n      default:\n        return \"6其他\";\n    }\n  }\n\n  checkGradClass(name, taoClasses){\n    const eventYear = this.state.eventYear;\n    let gradClass = \"\";\n\n    if(taoClasses){\n      if(taoClasses.chongDe && taoClasses.chongDe.completed === true && taoClasses.chongDe.completionDate && taoClasses.chongDe.completionDate.substr(0, 10).includes(eventYear)) {\n        gradClass = \"5chongDe\" ;\n      }else if(taoClasses.xingDe && taoClasses.xingDe.completed === true && taoClasses.xingDe.completionDate && taoClasses.xingDe.completionDate.substr(0, 10).includes(eventYear)){\n        gradClass = \"4xingDe\";\n      }else if(taoClasses.peiDe && taoClasses.peiDe.completed === true && taoClasses.peiDe.completionDate && taoClasses.peiDe.completionDate.substr(0, 10).includes(eventYear)){\n        gradClass = \"3peiDe\";\n      }else if(taoClasses.zhiShan && taoClasses.zhiShan.completed === true && taoClasses.zhiShan.completionDate && taoClasses.zhiShan.completionDate.substr(0, 10).includes(eventYear)){\n        gradClass = \"2zhiShan\";\n      }else if(taoClasses.xingMing && taoClasses.xingMing.completed === true && taoClasses.xingMing.completionDate && taoClasses.xingMing.completionDate.substr(0, 10).includes(eventYear)){\n        gradClass = \"1xingMing\";\n      }else{ //others \n        gradClass = \"\";\n      }\n    }else{\n      console.log(\"no grad lass\" + name + \": \" , taoClasses);\n      gradClass = \"\";\n    }\n    // if(name==\"胡艷蘭\") {\n    //   console.log(\"name=\" + name + \", taoClasses=\" + JSON.stringify(taoClasses));\n    //   console.log(\"taoClasses.peiDe:\"+taoClasses.peiDe);\n    //   console.log(\"taoClasses.peiDe.completed=\"+taoClasses.peiDe.completed);\n    //   console.log(\"taoClasses.peiDe.completionDate:\"+taoClasses.peiDe.completionDate);\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10));\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10).includes(eventYear));\n    //   console.log(\"gradClass=\"+ gradClass);\n    // }\n    return gradClass;\n  }\n\n  checkTempleId(name){\n    switch(name){\n      case \"沾德\":\n        return 0;\n        break;\n      case \"恆德\":\n        return 1;\n        break;\n      case \"同德\":\n        return 2;\n        break;\n      case \"正德\":\n        return 3;\n        break;\n      case \"儒德\":\n        return 4;\n        break;\n      case \"明德\":\n        return 5; \n        break;\n      case \"聖德\":\n        return 6;\n      case \"涵德\":\n        return 7;\n        break;\n      case \"贊化\":\n        return 8;\n        break;\n      case \"其它\":\n        return 9; \n        break;\n      default:\n        return 9; \n        break;          \n    }\n  }\n\n  getUrlParam(parameter){\n    let getAction=\"\", url = \"\";\n    url = new URLSearchParams(window.location.search);\n    getAction = url.get(parameter);\n    if(getAction===null){\n      alert(\"You forgot to enter event type in the URL parameter! This page wont be generating correct data! Enter ex: ?event=temple, host, class\");\n    }else{\n      return getAction;\n    }\n  }\n\n  getJsonData(_url, callback){\n    console.log(\"Json _url=\" + _url);\n    fetch('./json/'+_url + '.json')\n    .then(response => response.json())\n    .then(result => {\n       callback(result);\n    });\n  }\n\n  getTempleList(){\n    fetch('./json/templeList.json')\n    .then(response => response.json())\n    .then(result => {\n      const tempList = result.map(item => {\n        return item;\n      });\n      this.setState({templeList: tempList});\n    });\n  }\n\n  componentDidMount(){\n    this.getDataSource();\n    this.getTempleList();\n  }\n\n  render(){\n    \n    return(\n      <div>\n        <div id=\"host-class\" className=\"main-container event-name\">\n          <HostHeader\n            eventName = {this.state.eventName}\n            eventDate = {this.state.eventDate}\n            classMemberText = {this.state.classMemberText}\n          />\n          <HostSummary\n            event = {this.state.event}\n            tolRquired = {this.state.tolRquired}\n            tolSigninClassMember = {this.state.tolSigninClassMember}\n            tolSigninHost = {this.state.tolSigninHost}\n            tolSigninAHost = {this.state.tolSigninAHost}\n            tolSigninDeClass = {this.state.tolSigninDeClass}\n            classSummaryArr = {this.state.classSummaryArr}\n          />\n          <HostAttendantSummary\n            eventType = {this.state.classMember}\n            tolSignin = {this.state.tolSignin}\n            tolAdult = {this.state.tolMale + this.state.tolFemale}\n            tolChildren = {this.state.tolBoy + this.state.tolGirl}\n            tolMale = {this.state.tolMale}\n            tolFemale = {this.state.tolFemale}\n            tolBoy = {this.state.tolBoy}\n            tolGirl = {this.state.tolGirl}\n            tolSigninOthers = {this.state.tolSigninOthers}\n          />\n        </div>\n        <HostAttendRate\n          templeList = {this.state.templeList}\n          requiredArr = {this.state.requiredArr}\n          tolSignin = {this.state.tolSignin}\n        />\n        <hr/>\n        <ClassAttendRate\n          event = {this.state.event}\n          templeClassSummaryObj = {this.state.templeClassSummaryObj}\n        />\n        <hr/>\n        <ClassAttendList\n          event = {this.state.event}\n          eventYear = {this.state.eventYear}\n          templeClassSummaryObj = {this.state.templeClassSummaryObj}\n          classSummaryArr = {this.state.classSummaryArr}\n          classMemberObj = {this.state.classMemberObj}\n        />\n        <hr/>\n        <HostAttendantByTemple\n          templeList = {this.state.templeList}\n        />\n      </div>\n      \n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}