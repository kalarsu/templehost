{"ast":null,"code":"var _jsxFileName = \"/Users/chisu/Sites/templehost/src/components/App.js\";\nimport React, { Component } from 'react';\nimport '../css/styles.css';\nimport HostHeader from './HostHeader';\nimport HostSummary from './HostSummary';\nimport HostAttendantSummary from './HostAttendantSummary';\nimport HostAttendRate from './HostAttendRate';\nimport HostAttendantByTemple from './HostAttendantByTemple';\nimport AllAttendantRate from './AllAttendantRate';\nimport { findIndex, without } from 'lodash';\nimport ClassAttendRate from './ClassAttendRate';\nimport ClassAttendList from './ClassAttendList';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      event: \"\",\n      dataYear: \"\",\n      eventName: \"\",\n      eventDate: \"\",\n      classMemberText: \"\",\n      tolRquired: 0,\n      tolSignin: 0,\n      tolSigninHost: 0,\n      tolSigninAHost: 0,\n      tolSigninDeClass: 0,\n      tolSigninOthers: 0,\n      tolSigninClassMember: 0,\n      age: 0,\n      gender: \"\",\n      tolMale: 0,\n      tolFemale: 0,\n      tolBoy: 0,\n      tolGirl: 0,\n      requiredArr: [],\n      signinArr: [],\n      zanDe: [],\n      henDe: [],\n      tonDe: [],\n      zenDe: [],\n      zuDe: [],\n      minDe: [],\n      sanDe: [],\n      otherTemple: [],\n      requiredObj: {},\n      signinObj: {},\n      vowToBeObj: {},\n      templeList: [],\n      lassMember: \"\",\n      zanDeReq: 0,\n      henDeReq: 0,\n      tonDeReq: 0,\n      zenDeReq: 0,\n      zuDeReq: 0,\n      minDeReq: 0,\n      sanDeReq: 0,\n      hanDeReq: 0,\n      zanWaReq: 0,\n      othersReq: 0,\n      zanDeSignin: 0,\n      henDeSignin: 0,\n      tonDeSignin: 0,\n      zenDeSignin: 0,\n      zuDeSignin: 0,\n      minDeSignin: 0,\n      sanDeSignin: 0,\n      hanDeSignin: 0,\n      zanWaSignin: 0,\n      othersSignin: 0,\n      vow: [\"辦事人員\", \"\", \"\", \"\", \"\"],\n      templeClassSummaryObj: [[\"zanDe\", \"沾德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], //[\"新民\",tolReq,rolSignin] etc\n      [\"henDe\", \"恆德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"tonDe\", \"同德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"zenDe\", \"正德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"zuDe\", \"儒德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"minDe\", \"明德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"sanDe\", \"聖德\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]], [\"others\", \"其它\", [[\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0], [\"\", 0, 0]]]],\n      classMemberObj: {\n        \"xingMing\": [],\n        \"zhiShan\": [],\n        \"peiDe\": [],\n        \"xingDe\": [],\n        \"chongDe\": [],\n        \"lecturer\": []\n      },\n      classVowObj: {\n        \"xingMing\": \"辦事人員\",\n        \"zhiShan\": \"講員\",\n        \"peiDe\": \"\",\n        \"xingDe\": \"\",\n        \"chongDe\": \"\",\n        \"lecturer\": \"講師\"\n      },\n      classSummaryArr: [[\"新民\", \"xingMing\", 0, 0, 0, 0], [\"至善\", \"zhiShan\", 0, 0, 0, 0], [\"培德\", \"peiDe\", 0, 0, 0, 0], [\"行德\", \"xingDe\", 0, 0, 0, 0], [\"崇德\", \"chongDe\", 0, 0, 0, 0], [\"講培\", \"lecturer\", 0, 0, 0, 0] //tolReq乾，tolReq坤, tolSignin乾，tolSign坤\t\n      ] // classListObj: {\"新民班\": 0, \"至善班\": 1, \"培德班\": 2, \"行德班\": 3, \"崇德班\": 4}\n\n    };\n    this.getTempleList = this.getTempleList.bind(this);\n    this.getUrlParam = this.getUrlParam.bind(this);\n    this.getJsonData = this.getJsonData.bind(this);\n    this.getDataSource = this.getDataSource.bind(this);\n    this.checkVows = this.checkVows.bind(this);\n    this.checkVowsTobe = this.checkVowsTobe.bind(this);\n    this.getVowsName = this.getVowsName.bind(this);\n    this.checkIfSignin = this.checkIfSignin.bind(this);\n    this.checkIfRequired = this.checkIfRequired.bind(this);\n    this.checkIfClassMember = this.checkIfClassMember.bind(this);\n    this.checkTempleId = this.checkTempleId.bind(this);\n    this.jsonToObj = this.jsonToObj.bind(this);\n    this.checkGradClass = this.checkGradClass.bind(this);\n    this.genAttendanceSummary = this.genAttendanceSummary.bind(this);\n    this.genReqListByTemple = this.genReqListByTemple.bind(this); //class member\n    //this.updateClassSummaryByTemple = this.updateClassSummaryByTemple.bind(this);\n  }\n\n  genReqListByTemple() {\n    let signin,\n        required,\n        id,\n        name,\n        gender,\n        temple,\n        vow,\n        gradClass,\n        notClassMemberCount = 0;\n    const _requiredArr = this.state.requiredArr;\n    const _signinArr = this.state.signinArr;\n    let _templeList = this.state.templeList;\n\n    let _templeId;\n\n    let classMember = this.state.classMember; //console.log(\"classMember=\" + classMember);\n\n    _signinArr.forEach((element, index) => {\n      //check signIn hosts, but not in required list\n      id = element[0];\n      name = element[1];\n      gender = element[2];\n      temple = element[3];\n      vow = element[4];\n      gradClass = element[5];\n      required = this.checkIfRequired(id);\n\n      if (temple !== undefined) {\n        _templeId = this.checkTempleId(temple.substring(0, 2));\n      } else {\n        _templeId = 9; //其它單位\n      } //sum up all attendent by temple\n\n\n      _templeList[_templeId][\"tolAllSignin\"]++;\n\n      if (this.checkIfClassMember(vow, gradClass) && required === \"no\") {\n        notClassMemberCount++; //console.log(\"classMember=\" + classMember);\n        //if(classMember !== \"class-member\"){\n\n        console.log(\"====Signin hosts, but not in required list:\" + index + \",name=\" + name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\" + gradClass); //}\n      }\n\n      if (!this.checkIfClassMember(vow, gradClass)) {\n        notClassMemberCount++; //if(classMember !== \"class-member\"){\n\n        console.log(\"====Signin hosts, but not class member:\" + index + \",name=\" + name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\" + gradClass); //}\n\n        _templeList[_templeId][\"tolOthers\"]++;\n      }\n\n      if (classMember === \"class-member\") {\n        if (vow === \"1master\" || vow === \"2lecturer\" || vow === \"3host\") {\n          _templeList[_templeId][\"tolHost\"]++;\n          this.setState({\n            tolSigninHost: this.state.tolSigninHost + 1\n          });\n        }\n\n        if (vow === \"4ahost\") {\n          _templeList[_templeId][\"tolAHost\"]++;\n          this.setState({\n            tolSigninAHost: this.state.tolSigninAHost + 1\n          });\n        }\n\n        if (vow === \"5declass\") {\n          _templeList[_templeId][\"tolDeclass\"]++;\n          this.setState({\n            tolSigninDeClass: this.state.tolSigninDeClass + 1\n          });\n        }\n      }\n    });\n\n    this.setState({\n      tolSigninOthers: notClassMemberCount\n    });\n\n    _requiredArr.forEach((element, index) => {\n      id = element[0];\n      name = element[1];\n      gender = element[2];\n      temple = element[3];\n      vow = element[4];\n      signin = this.checkIfSignin(id);\n      gradClass = element[5]; //console.log(\"id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin);\n\n      if (temple !== undefined) {\n        _templeId = this.checkTempleId(temple.substring(0, 2));\n      } else {\n        _templeId = 9; //其它單位\n      } //console.log(\"templeInof=\" + _templeList[_templeId][\"templeName\"]);\n      //sum up temple host, Ahost, and deClass members in this temple\n\n\n      if (this.checkIfClassMember(vow, gradClass)) {\n        _templeList[_templeId][\"tolReq\"]++;\n\n        if (signin === \"yes\") {\n          _templeList[_templeId][\"tolSignin\"]++;\n\n          if (classMember !== \"class-member\") {\n            //console.log(\"---id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin + \", gradClass=\"+ gradClass);\n            if (vow === \"1master\" || vow === \"2lecturer\" || vow === \"3host\") {\n              _templeList[_templeId][\"tolHost\"]++;\n              this.setState({\n                tolSigninHost: this.state.tolSigninHost + 1\n              });\n              this.setState({\n                tolSigninClassMember: this.state.tolSigninClassMember + 1\n              });\n            }\n\n            if (vow === \"4ahost\") {\n              _templeList[_templeId][\"tolAHost\"]++;\n              this.setState({\n                tolSigninAHost: this.state.tolSigninAHost + 1\n              });\n              this.setState({\n                tolSigninClassMember: this.state.tolSigninClassMember + 1\n              });\n            }\n\n            if (vow === \"5declass\") {\n              _templeList[_templeId][\"tolDeclass\"]++;\n              this.setState({\n                tolSigninDeClass: this.state.tolSigninDeClass + 1\n              });\n              if (classMember === \"hosts-declass\") this.setState({\n                tolSigninClassMember: this.state.tolSigninClassMember + 1\n              });\n            }\n          } else if (gradClass !== undefined && gradClass !== \"\") {\n            //畢班,人才提拔\n            this.setState({\n              tolSigninClassMember: this.state.tolSigninClassMember + 1\n            });\n          }\n        }\n      } else {//not class member\n        //if(vow===\"6others\")   _templeList[_templeId][\"tolOthers\"] ++;\n        //console.log(\"Within requried list, but not class member=\" + name + \", vow=\" + vow + \", temple=\" + temple);\n      }\n\n      _templeList[_templeId][\"templeArr\"].push([id, name, gender, this.getVowsName(vow), signin]);\n\n      this.setState({\n        templeList: _templeList\n      });\n    }); //end of forEach for _requiredAr\n\n  }\n\n  genAttendanceSummary(gender, name) {\n    switch (gender) {\n      case \"乾\":\n        this.setState({\n          tolMale: this.state.tolMale + 1\n        });\n        break;\n\n      case \"坤\":\n        this.setState({\n          tolFemale: this.state.tolFemale + 1\n        });\n        break;\n\n      case \"童\":\n        this.setState({\n          tolBoy: this.state.tolBoy + 1\n        });\n        break;\n\n      case \"女\":\n        this.setState({\n          tolGirl: this.state.tolGirl + 1\n        });\n        break;\n\n      default:\n        console.log(\"! Gener not clear: \" + gender + \", name=\" + name);\n        break;\n    }\n\n    this.setState({\n      tolSignin: this.state.tolSignin + 1\n    });\n  }\n\n  getDataSource() {\n    const event = this.getUrlParam(\"event\");\n    const dataYear = this.getUrlParam(\"dataYear\");\n    const eventId = this.getUrlParam(\"eventId\");\n    let systemUrl = window.location.origin,\n        signUrl,\n        reqUrl,\n        today = new Date(),\n        todayDate = today.getMonth() + 1 + \"/\" + today.getDate() + \"/\" + today.getFullYear();\n\n    if (systemUrl.indexOf(\"localhost\") === -1) {\n      signUrl = systemUrl + \"/api/v1/attendees/events/\" + eventId + \"?action=SIGNIN\";\n      reqUrl = systemUrl + \"/api/v1/attendees/events/\" + eventId + \"?action=REQUIRED\";\n    } else {\n      signUrl = \"./json/signin-\" + eventId + \".json\";\n      reqUrl = \"./json/required-\" + eventId + \".json\";\n    }\n\n    console.log(\"signurl=\" + signUrl);\n    this.setState({\n      event: event\n    });\n    this.setState({\n      dataYear: dataYear\n    });\n\n    if (event === \"temple\") {\n      this.setState({\n        eventName: \"固本圖強班\",\n        eventDate: todayDate,\n        classMemberText: \"壇主、講師、副壇主\",\n        classMember: \"hosts\"\n      });\n    } else if (event === \"host\") {\n      this.setState({\n        eventName: \"壇主講師班\",\n        eventDate: todayDate,\n        classMemberText: \"壇主、講師、副壇主、德字班道親\",\n        classMember: \"hosts-declass\"\n      });\n    } else {\n      this.setState({\n        eventName: \"畢班、人才提拔\",\n        eventDate: todayDate,\n        classMemberText: dataYear + \" 年進修班畢班班員\",\n        classMember: \"class-member\"\n      });\n    } //console.log(\"eventName=\"+ event);\n\n\n    this.getJsonData(signUrl, signindata => {\n      this.getJsonData(reqUrl, reqdata => {\n        this.jsonToObj(\"signin\", signindata, _dataObj => {\n          //must have signinObj created first, then later on can check if required class member sign in or not\n          this.setState({\n            signinObj: _dataObj\n          });\n          this.jsonToObj(\"required\", reqdata, _dataObj => {\n            this.setState({\n              requiredObj: _dataObj\n            });\n          });\n        });\n        this.genReqListByTemple();\n      });\n    });\n  }\n\n  jsonToObj(type, data, callback) {\n    console.log(\"jsonToObj Type=\" + type);\n    let classMember = \"\",\n        dataObj = {},\n        dataArr = [],\n        id,\n        name,\n        gender,\n        temple,\n        templeId,\n        vow,\n        gradClass,\n        vowTobe,\n        xingMing = [],\n        zhiShan = [],\n        peiDe = [],\n        xingDe = [],\n        chongDe = [],\n        lecturer = [],\n        xingMingSum = this.state.classSummaryArr[0],\n        //[0,0,0,0] tolReqMale = 0, tolReqFemale = 0, tolSigninMale = 0, tolSigninFemale = 0,\n    zhiShanSum = this.state.classSummaryArr[1],\n        peiDeSum = this.state.classSummaryArr[2],\n        xingDeSum = this.state.classSummaryArr[3],\n        chongDeSum = this.state.classSummaryArr[4],\n        lecturerSum = this.state.classSummaryArr[5],\n        classMemberObj = {},\n        classSummaryArr = [],\n        templeClassSummaryObj = this.state.templeClassSummaryObj;\n    classMember = this.state.classMember;\n    const result = data.map(item => {\n      id = item.id;\n      name = item.name;\n      gender = item.gender;\n      temple = item.currentTemple;\n      vow = this.checkVows(id, type, name, item.vows, item.taoClasses);\n      gradClass = this.checkGradClass(name, item.taoClasses); // console.log(\"name=\" + name);\n      // console.log(\"gradClass=\" + gradClass);\n\n      vowTobe = this.checkVowsTobe(gradClass, item.vows); //console.log(\"vowTobe=\" + vowTobe);\n\n      if (temple == undefined) {\n        temple = \"其它\";\n        console.log(\"! Name=\" + name + \"--has no temple assigned, assigned to 其它 for now.\");\n      }\n\n      temple = temple.substring(0, 2);\n      templeId = this.checkTempleId(temple);\n      if (temple === \"崇慧\") temple = \"沾德\"; //console.log(\"templeId=\" + templeId);\n\n      dataObj[id] = [name, gender, temple, vow, gradClass];\n      dataArr.push([id, name, gender, temple, vow, gradClass]);\n\n      if (type === \"required\") {\n        //班員出席統計 summary section only\n        //console.log(id + \"-Checked?\" + this.checkIfSignin(id));\n        if (classMember === \"hosts\" && vow !== \"6others\" && vow !== \"5declass\") {\n          //Friday\n          this.setState({\n            tolRquired: this.state.tolRquired + 1\n          });\n        } else if (classMember === \"hosts-declass\" && vow !== \"6others\") {\n          //Saturday hosts + declass\n          this.setState({\n            tolRquired: this.state.tolRquired + 1\n          });\n        } else if (classMember === \"class-member\" && gradClass !== undefined && gradClass !== \"\") {\n          // Sunday , only graducated class memeber\n          this.setState({\n            tolRquired: this.state.tolRquired + 1\n          }); //form class memeber obj, and summary\n          //console.log(\"gradClass=\" + gradClass);\n\n          switch (gradClass) {\n            case \"1xingMing\":\n              xingMing.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? xingMingSum[2]++ : xingMingSum[3]++;\n              templeClassSummaryObj[templeId][2][0][0] = \"新民\";\n              templeClassSummaryObj[templeId][2][0][1]++;\n              break;\n\n            case \"2zhiShan\":\n              zhiShan.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? zhiShanSum[2]++ : zhiShanSum[3]++;\n              templeClassSummaryObj[templeId][2][1][0] = \"至善\";\n              templeClassSummaryObj[templeId][2][1][1]++;\n              break;\n\n            case \"3peiDe\":\n              peiDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? peiDeSum[2]++ : peiDeSum[3]++;\n              templeClassSummaryObj[templeId][2][2][0] = \"培德\";\n              templeClassSummaryObj[templeId][2][2][1]++;\n              break;\n\n            case \"4xingDe\":\n              xingDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? xingDeSum[2]++ : xingDeSum[3]++;\n              templeClassSummaryObj[templeId][2][3][0] = \"行德\";\n              templeClassSummaryObj[templeId][2][3][1]++;\n              break;\n\n            case \"5chongDe\":\n              chongDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? chongDeSum[2]++ : chongDeSum[3]++;\n              templeClassSummaryObj[templeId][2][4][0] = \"崇德\";\n              templeClassSummaryObj[templeId][2][4][1]++; //console.log(\"required 崇德=\"+name);\n\n              break;\n\n            case \"6lecturer\":\n              lecturer.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              gender === \"乾\" ? lecturerSum[2]++ : lecturerSum[3]++;\n              templeClassSummaryObj[templeId][2][5][0] = \"講培\";\n              templeClassSummaryObj[templeId][2][5][1]++;\n              break;\n          }\n        }\n      } else {\n        //type === \"signin\"\n        this.genAttendanceSummary(gender, name); // upate 活動人數統計 summary\n\n        if (classMember === \"class-member\" && gradClass !== undefined && gradClass !== \"\") {\n          // Sunday , only graducated class memeber\n          switch (gradClass) {\n            case \"1xingMing\":\n              gender === \"乾\" ? xingMingSum[4]++ : xingMingSum[5]++;\n              templeClassSummaryObj[templeId][2][0][0] = \"新民\";\n              templeClassSummaryObj[templeId][2][0][2]++;\n              break;\n\n            case \"2zhiShan\":\n              gender === \"乾\" ? zhiShanSum[4]++ : zhiShanSum[5]++;\n              templeClassSummaryObj[templeId][2][1][0] = \"至善\";\n              templeClassSummaryObj[templeId][2][1][2]++;\n              break;\n\n            case \"3peiDe\":\n              gender === \"乾\" ? peiDeSum[4]++ : peiDeSum[5]++;\n              templeClassSummaryObj[templeId][2][2][0] = \"培德\";\n              templeClassSummaryObj[templeId][2][2][2]++;\n              break;\n\n            case \"4xingDe\":\n              gender === \"乾\" ? xingDeSum[4]++ : xingDeSum[5]++;\n              templeClassSummaryObj[templeId][2][3][0] = \"行德\";\n              templeClassSummaryObj[templeId][2][3][2]++;\n              break;\n\n            case \"5chongDe\":\n              gender === \"乾\" ? chongDeSum[4]++ : chongDeSum[5]++;\n              templeClassSummaryObj[templeId][2][4][0] = \"崇德\";\n              templeClassSummaryObj[templeId][2][4][2]++; //console.log(\"signin 崇德=\"+name);\n\n              break;\n\n            case \"6lecturer\":\n              gender === \"乾\" ? lecturerSum[4]++ : lecturerSum[5]++;\n              templeClassSummaryObj[templeId][2][5][0] = \"講培\";\n              templeClassSummaryObj[templeId][2][5][2]++;\n              break;\n          }\n        }\n      }\n    }); // end of map\n\n    if (type === \"required\") {\n      this.setState({\n        requiredArr: dataArr\n      });\n    } else {\n      this.setState({\n        signinArr: dataArr\n      });\n    }\n\n    if (classMember === \"class-member\") {\n      if (type === \"required\") {\n        classMemberObj.xingMing = xingMing;\n        classMemberObj.zhiShan = zhiShan;\n        classMemberObj.peiDe = peiDe;\n        classMemberObj.xingDe = xingDe;\n        classMemberObj.chongDe = chongDe;\n        classMemberObj.lecturer = lecturer;\n        this.setState({\n          classMemberObj: classMemberObj\n        });\n        this.setState({\n          templeClassSummaryObj: templeClassSummaryObj\n        }); //console.log(\"classMemberObj=\" + JSON.stringify(classMemberObj));\n        // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n      }\n\n      classSummaryArr[0] = xingMingSum;\n      classSummaryArr[1] = zhiShanSum;\n      classSummaryArr[2] = peiDeSum;\n      classSummaryArr[3] = xingDeSum;\n      classSummaryArr[4] = chongDeSum;\n      classSummaryArr[5] = lecturerSum;\n      this.setState({\n        classSummaryArr: classSummaryArr\n      });\n      this.setState({\n        templeClassSummaryObj: templeClassSummaryObj\n      }); // console.log(\"classSummaryArr=\" + JSON.stringify(classSummaryArr));\n      // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n    } //console.log(\"type:\" + type, \", inde:\"+ ++index + \", currObj=\"+dataObj[5]);\n\n\n    callback(dataObj);\n  }\n\n  checkIfSignin(id) {\n    //console.log(\"id=\"+id);\n    const _signinObj = this.state.signinObj;\n    return _signinObj[id] && _signinObj[id] !== undefined ? \"yes\" : \"x\";\n  }\n\n  checkIfRequired(id) {\n    const _requiredObj = this.state.requiredObj;\n    return _requiredObj[id] && _requiredObj[id] !== undefined ? \"yes\" : \"no\";\n  }\n\n  checkIfClassMember(vow, gradeClass) {\n    let classMember = this.state.classMember;\n\n    if (classMember === \"hosts\" && vow !== \"5declass\" && vow !== \"6others\" || classMember === \"hosts-declass\" && vow !== \"6others\" || classMember === \"class-member\" && gradeClass !== \"\" && gradeClass !== undefined) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  checkVows(id, type, name, vows, taoClasses) {\n    if (vows) {\n      if (vows[\"transmittingMaster\"]) {\n        if (vows[\"transmittingMaster\"].made === true) {\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"1master\";\n        }\n\n        ;\n      }\n\n      if (vows[\"lecturer\"]) {\n        if (vows[\"lecturer\"].made === true) {\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"2lecturer\";\n        }\n\n        ;\n      }\n\n      if (vows[\"templeHost\"]) {\n        if (vows[\"templeHost\"].made === true) {\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"3host\";\n        }\n\n        ;\n      }\n\n      if (vows[\"assistantTempleHost\"]) {\n        if (vows[\"assistantTempleHost\"].made === true) {\n          //if(type===\"signin\") this.setState({ tolSigninAHost: this.state.tolSigninAHost +1});\n          return \"4ahost\";\n        }\n\n        ;\n      }\n    }\n\n    if (taoClasses) {\n      if (taoClasses.chongDe && taoClasses.chongDe.completed === true || taoClasses.xingDe && taoClasses.xingDe.completed === true || taoClasses.peiDe && taoClasses.peiDe.completed === true) {\n        //if(type===\"signin\") this.setState({ tolSigninDeClass: this.state.tolSigninDeClass +1});\n        return \"5declass\";\n      } else {\n        //others \n        //if(type===\"signin\") this.setState({ tolSigninOthers: this.state.tolSigninOthers +1});\n        return \"6others\";\n      }\n    }\n\n    console.log(\"no vow nor declass\" + name + \": \" + vows, taoClasses);\n    return false;\n  }\n\n  checkVowsTobe(gradClass, vows) {\n    if (gradClass == \"1xingMing\") {\n      if (vows != undefined) {\n        if (vows[\"taoHelper\"] && vows[\"taoHelper\"].made) {\n          return \"辦事人員-已立\";\n        } else {\n          return \"辦事人員\";\n        }\n      } else {\n        return \"辦事人員\";\n      }\n    } else if (gradClass == \"2zhiShan\") {\n      if (vows !== undefined) {\n        if (vows[\"assistantLecturer\"] && vows[\"assistantLecturer\"].made) {\n          return \"講員-已立\";\n        } else {\n          return \"講員\";\n        }\n      } else {\n        return \"講員\";\n      }\n    } else if (gradClass == \"6lecturer\") {\n      if (vows !== undefined) {\n        if (vows[\"lecturer\"] && vows[\"lecturer\"].made) {\n          return \"講師-已立\";\n        } else {\n          return \"講師\";\n        }\n      } else {\n        return \"講師\";\n      }\n    } else {\n      return \"---\";\n    }\n  }\n\n  getVowsName(vow) {\n    switch (vow) {\n      case \"1master\":\n        return \"1點傳師\";\n\n      case \"2lecturer\":\n        return \"2壇主、講師\";\n\n      case \"3host\":\n        return \"3壇主\";\n\n      case \"4ahost\":\n        return \"4副壇主\";\n\n      case \"5declass\":\n        return \"5德字班\";\n\n      default:\n        return \"6其他\";\n    }\n  }\n\n  checkGradClass(name, taoClasses) {\n    const dataYear = this.state.dataYear;\n    let gradClass = \"\";\n\n    if (taoClasses) {\n      if (taoClasses.lecturer && taoClasses.lecturer.completed === true && taoClasses.lecturer.completionDate && taoClasses.lecturer.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"6lecturer\";\n      } else if (taoClasses.chongDe && taoClasses.chongDe.completed === true && taoClasses.chongDe.completionDate && taoClasses.chongDe.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"5chongDe\";\n      } else if (taoClasses.xingDe && taoClasses.xingDe.completed === true && taoClasses.xingDe.completionDate && taoClasses.xingDe.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"4xingDe\";\n      } else if (taoClasses.peiDe && taoClasses.peiDe.completed === true && taoClasses.peiDe.completionDate && taoClasses.peiDe.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"3peiDe\";\n      } else if (taoClasses.zhiShan && taoClasses.zhiShan.completed === true && taoClasses.zhiShan.completionDate && taoClasses.zhiShan.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"2zhiShan\";\n      } else if (taoClasses.xingMing && taoClasses.xingMing.completed === true && taoClasses.xingMing.completionDate && taoClasses.xingMing.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"1xingMing\";\n      } else {\n        //others \n        gradClass = \"\";\n      }\n    } else {\n      console.log(\"no grad lass\" + name + \": \", taoClasses);\n      gradClass = \"\";\n    } // if(name==\"胡艷蘭\") {\n    //   console.log(\"name=\" + name + \", taoClasses=\" + JSON.stringify(taoClasses));\n    //   console.log(\"taoClasses.peiDe:\"+taoClasses.peiDe);\n    //   console.log(\"taoClasses.peiDe.completed=\"+taoClasses.peiDe.completed);\n    //   console.log(\"taoClasses.peiDe.completionDate:\"+taoClasses.peiDe.completionDate);\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10));\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10).includes(dataYear));\n    //   console.log(\"gradClass=\"+ gradClass);\n    // }\n\n\n    return gradClass;\n  }\n\n  checkTempleId(name) {\n    switch (name) {\n      case \"沾德\":\n        return 0;\n        break;\n\n      case \"恆德\":\n        return 1;\n        break;\n\n      case \"同德\":\n        return 2;\n        break;\n\n      case \"正德\":\n        return 3;\n        break;\n\n      case \"儒德\":\n        return 4;\n        break;\n\n      case \"明德\":\n        return 5;\n        break;\n\n      case \"聖德\":\n        return 6;\n\n      case \"其它\":\n        return 7;\n        break;\n\n      default:\n        return 7;\n        break;\n    }\n  }\n\n  getUrlParam(parameter) {\n    let getAction = \"\",\n        url = \"\";\n    url = new URLSearchParams(window.location.search);\n    getAction = url.get(parameter);\n\n    if (getAction === null) {\n      alert(\"You forgot to enter event type in the URL parameter! This page wont be generating correct data! Enter ex: ?event=temple, host, class\");\n    } else {\n      return getAction;\n    }\n  }\n\n  getJsonData(_url, callback) {\n    console.log(\"Json _url=\" + _url);\n    fetch(_url).then(response => response.json()).then(result => {\n      callback(result);\n    });\n  }\n\n  getTempleList() {\n    let systemUrl = window.location.origin,\n        url;\n\n    if (systemUrl.indexOf(\"localhost\") === -1) {\n      url = systemUrl + \"/static/json/templeList.json\";\n    } else {\n      url = \"./json/templeList.json\";\n    }\n\n    console.log(\"getTempleList=\" + url);\n    fetch(url).then(response => response.json()).then(result => {\n      const tempList = result.map(item => {\n        return item;\n      });\n      this.setState({\n        templeList: tempList\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.getDataSource();\n    this.getTempleList();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 694\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"host-class\",\n      className: \"main-container event-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 695\n      },\n      __self: this\n    }, React.createElement(HostHeader, {\n      eventName: this.state.eventName,\n      eventDate: this.state.eventDate,\n      classMemberText: this.state.classMemberText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696\n      },\n      __self: this\n    }), React.createElement(HostSummary, {\n      event: this.state.event,\n      tolRquired: this.state.tolRquired,\n      tolSigninClassMember: this.state.tolSigninClassMember,\n      tolSigninHost: this.state.tolSigninHost,\n      tolSigninAHost: this.state.tolSigninAHost,\n      tolSigninDeClass: this.state.tolSigninDeClass,\n      classSummaryArr: this.state.classSummaryArr,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 701\n      },\n      __self: this\n    }), React.createElement(HostAttendantSummary, {\n      eventType: this.state.classMember,\n      tolSignin: this.state.tolSignin,\n      tolAdult: this.state.tolMale + this.state.tolFemale,\n      tolChildren: this.state.tolBoy + this.state.tolGirl,\n      tolMale: this.state.tolMale,\n      tolFemale: this.state.tolFemale,\n      tolBoy: this.state.tolBoy,\n      tolGirl: this.state.tolGirl,\n      tolSigninOthers: this.state.tolSigninOthers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 710\n      },\n      __self: this\n    })), React.createElement(AllAttendantRate, {\n      templeList: this.state.templeList,\n      tolSignin: this.state.tolSignin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 722\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 726\n      },\n      __self: this\n    }), React.createElement(HostAttendRate, {\n      templeList: this.state.templeList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 730\n      },\n      __self: this\n    }), React.createElement(ClassAttendRate, {\n      event: this.state.event,\n      templeClassSummaryObj: this.state.templeClassSummaryObj,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 731\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735\n      },\n      __self: this\n    }), React.createElement(ClassAttendList, {\n      event: this.state.event,\n      dataYear: this.state.dataYear,\n      templeClassSummaryObj: this.state.templeClassSummaryObj,\n      classSummaryArr: this.state.classSummaryArr,\n      classMemberObj: this.state.classMemberObj,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 736\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743\n      },\n      __self: this\n    }), React.createElement(HostAttendantByTemple, {\n      templeList: this.state.templeList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 744\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/chisu/Sites/templehost/src/components/App.js"],"names":["React","Component","HostHeader","HostSummary","HostAttendantSummary","HostAttendRate","HostAttendantByTemple","AllAttendantRate","findIndex","without","ClassAttendRate","ClassAttendList","App","constructor","state","event","dataYear","eventName","eventDate","classMemberText","tolRquired","tolSignin","tolSigninHost","tolSigninAHost","tolSigninDeClass","tolSigninOthers","tolSigninClassMember","age","gender","tolMale","tolFemale","tolBoy","tolGirl","requiredArr","signinArr","zanDe","henDe","tonDe","zenDe","zuDe","minDe","sanDe","otherTemple","requiredObj","signinObj","vowToBeObj","templeList","lassMember","zanDeReq","henDeReq","tonDeReq","zenDeReq","zuDeReq","minDeReq","sanDeReq","hanDeReq","zanWaReq","othersReq","zanDeSignin","henDeSignin","tonDeSignin","zenDeSignin","zuDeSignin","minDeSignin","sanDeSignin","hanDeSignin","zanWaSignin","othersSignin","vow","templeClassSummaryObj","classMemberObj","classVowObj","classSummaryArr","getTempleList","bind","getUrlParam","getJsonData","getDataSource","checkVows","checkVowsTobe","getVowsName","checkIfSignin","checkIfRequired","checkIfClassMember","checkTempleId","jsonToObj","checkGradClass","genAttendanceSummary","genReqListByTemple","signin","required","id","name","temple","gradClass","notClassMemberCount","_requiredArr","_signinArr","_templeList","_templeId","classMember","forEach","element","index","undefined","substring","console","log","setState","push","eventId","systemUrl","window","location","origin","signUrl","reqUrl","today","Date","todayDate","getMonth","getDate","getFullYear","indexOf","signindata","reqdata","_dataObj","type","data","callback","dataObj","dataArr","templeId","vowTobe","xingMing","zhiShan","peiDe","xingDe","chongDe","lecturer","xingMingSum","zhiShanSum","peiDeSum","xingDeSum","chongDeSum","lecturerSum","result","map","item","currentTemple","vows","taoClasses","_signinObj","_requiredObj","gradeClass","made","completed","completionDate","substr","includes","parameter","getAction","url","URLSearchParams","search","get","alert","_url","fetch","then","response","json","tempList","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/styles.css';\nimport HostHeader from './HostHeader';\nimport HostSummary from './HostSummary';\nimport HostAttendantSummary from './HostAttendantSummary';\nimport HostAttendRate from './HostAttendRate';\nimport HostAttendantByTemple from './HostAttendantByTemple';\nimport AllAttendantRate from './AllAttendantRate';\nimport {findIndex, without} from 'lodash';\nimport ClassAttendRate from './ClassAttendRate';\nimport ClassAttendList from './ClassAttendList';\n\nclass App extends Component{\n  constructor(){\n    super();\n    this.state = {\n      event: \"\", dataYear: \"\", eventName: \"\", eventDate: \"\", classMemberText: \"\",\n      tolRquired : 0, tolSignin : 0, tolSigninHost : 0, tolSigninAHost : 0,\n      tolSigninDeClass : 0, tolSigninOthers : 0, tolSigninClassMember : 0,\n      age : 0, gender : \"\", tolMale : 0, tolFemale : 0 , tolBoy : 0, tolGirl : 0,\n      requiredArr: [], signinArr: [],\n      zanDe: [], henDe: [], tonDe: [], zenDe: [], zuDe: [], minDe: [], sanDe: [], otherTemple: [], \n      requiredObj: {}, signinObj: {}, vowToBeObj: {},\n      templeList: [], lassMember: \"\", \n      zanDeReq: 0, henDeReq: 0, tonDeReq: 0, zenDeReq: 0, zuDeReq: 0, minDeReq: 0,\n      sanDeReq: 0, hanDeReq: 0, zanWaReq: 0, othersReq: 0,\n      zanDeSignin: 0, henDeSignin: 0, tonDeSignin: 0, zenDeSignin: 0, zuDeSignin: 0,\n      minDeSignin: 0, sanDeSignin: 0, hanDeSignin: 0, zanWaSignin: 0, othersSignin: 0,\n      vow: [\"辦事人員\", \"\", \"\", \"\", \"\"],\n      templeClassSummaryObj:[\n        [\"zanDe\", \"沾德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]], //[\"新民\",tolReq,rolSignin] etc\n\t\t\t\t[\"henDe\", \"恆德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"tonDe\", \"同德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"zenDe\", \"正德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"zuDe\",  \"儒德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"minDe\", \"明德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"sanDe\", \"聖德\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n\t\t\t\t[\"others\",\"其它\",[[\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0], [\"\",0,0]]],\n      ],\n      classMemberObj: {\n\t\t\t\t\"xingMing\": [],\n\t\t\t\t\"zhiShan\": [],\n\t\t\t\t\"peiDe\": [],\n\t\t\t\t\"xingDe\": [],\n\t\t\t\t\"chongDe\": [],\n        \"lecturer\": [],\n      },\n      classVowObj: {\n\t\t\t\t\"xingMing\": \"辦事人員\",\n\t\t\t\t\"zhiShan\": \"講員\",\n\t\t\t\t\"peiDe\": \"\",\n\t\t\t\t\"xingDe\": \"\",\n\t\t\t\t\"chongDe\": \"\",\n        \"lecturer\" : \"講師\",\n      },\n      classSummaryArr:[\n\t\t\t\t[\"新民\",\"xingMing\",0,0,0,0],\n\t\t\t\t[\"至善\",\"zhiShan\",0,0,0,0],\n\t\t\t\t[\"培德\",\"peiDe\",0,0,0,0],\n\t\t\t\t[\"行德\",\"xingDe\",0,0,0,0],\n\t\t\t\t[\"崇德\",\"chongDe\",0,0,0,0],\n        [\"講培\",\"lecturer\",0,0,0,0], //tolReq乾，tolReq坤, tolSignin乾，tolSign坤\t\n      ] // classListObj: {\"新民班\": 0, \"至善班\": 1, \"培德班\": 2, \"行德班\": 3, \"崇德班\": 4}\n    }\n    \n    this.getTempleList = this.getTempleList.bind(this);\n    this.getUrlParam = this.getUrlParam.bind(this);\n    this.getJsonData = this.getJsonData.bind(this);\n    this.getDataSource = this.getDataSource.bind(this);\n    this.checkVows = this.checkVows.bind(this);\n    this.checkVowsTobe = this.checkVowsTobe.bind(this);\n    this.getVowsName = this.getVowsName.bind(this);\n    this.checkIfSignin = this.checkIfSignin.bind(this);\n    this.checkIfRequired = this.checkIfRequired.bind(this);\n    this.checkIfClassMember = this.checkIfClassMember.bind(this);\n    this.checkTempleId = this.checkTempleId.bind(this);\n    this.jsonToObj = this.jsonToObj.bind(this);\n    this.checkGradClass = this.checkGradClass.bind(this);\n    this.genAttendanceSummary = this.genAttendanceSummary.bind(this);\n    this.genReqListByTemple = this.genReqListByTemple.bind(this);\n\n    //class member\n    //this.updateClassSummaryByTemple = this.updateClassSummaryByTemple.bind(this);\n  }\n\n  genReqListByTemple(){\n    let signin, required, id, name, gender, temple, vow, gradClass, notClassMemberCount=0;\n    const _requiredArr = this.state.requiredArr;\n    const _signinArr = this.state.signinArr;\n    let _templeList = this.state.templeList;\n    let _templeId;\n    let classMember = this.state.classMember;\n    //console.log(\"classMember=\" + classMember);\n\n    _signinArr.forEach((element, index)=>{ //check signIn hosts, but not in required list\n      id = element[0];\n\t\t\tname = element[1];\n\t\t\tgender = element[2];\n\t\t\ttemple = element[3];\n      vow = element[4];\n      gradClass = element[5];\n\n      required = this.checkIfRequired(id);\n      if (temple !== undefined){\n        _templeId = this.checkTempleId(temple.substring(0,2));\n      }else{\n        _templeId = 9; //其它單位\n      }\n\n      //sum up all attendent by temple\n      _templeList[_templeId][\"tolAllSignin\"] ++;\n\n      if(this.checkIfClassMember(vow, gradClass) && required ===\"no\") {\n        notClassMemberCount ++;\n        //console.log(\"classMember=\" + classMember);\n        //if(classMember !== \"class-member\"){\n          console.log(\"====Signin hosts, but not in required list:\" + index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\"+gradClass);\n        //}\n      }\n      \n      if(!this.checkIfClassMember(vow, gradClass)){\n        notClassMemberCount++;\n        //if(classMember !== \"class-member\"){\n          console.log(\"====Signin hosts, but not class member:\" + index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", gradClass=\"+gradClass);\n        //}\n        _templeList[_templeId][\"tolOthers\"] ++;\n      }\n      \n      if(classMember === \"class-member\"){\n        if(vow===\"1master\" || vow===\"2lecturer\" || vow===\"3host\") {\n          _templeList[_templeId][\"tolHost\"] ++;\n          this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n        }\n        if(vow===\"4ahost\"){\n          _templeList[_templeId][\"tolAHost\"] ++;\n          this.setState({ tolSigninAHost: this.state.tolSigninAHost+1});\n        }\n        if(vow===\"5declass\"){\n          _templeList[_templeId][\"tolDeclass\"] ++;\n          this.setState({ tolSigninDeClass: this.state.tolSigninDeClass+1});\n        }\n      }\n    });\n\n    this.setState({ tolSigninOthers: notClassMemberCount});\n\n    _requiredArr.forEach( (element, index) => {\n      id = element[0];\n\t\t\tname = element[1];\n\t\t\tgender = element[2];\n\t\t\ttemple = element[3];\n      vow = element[4];\n      signin = this.checkIfSignin(id);\n      gradClass = element[5];\n      //console.log(\"id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin);\n      \n      if (temple !== undefined){\n        _templeId = this.checkTempleId(temple.substring(0,2));\n      }else{\n        _templeId = 9; //其它單位\n      }\n        \n      //console.log(\"templeInof=\" + _templeList[_templeId][\"templeName\"]);\n      //sum up temple host, Ahost, and deClass members in this temple\n      if (this.checkIfClassMember(vow, gradClass)) {\n        _templeList[_templeId][\"tolReq\"] ++ ;\n        if(signin === \"yes\"){\n          _templeList[_templeId][\"tolSignin\"] ++;\n\n          if(classMember !== \"class-member\"){ \n            //console.log(\"---id\"+ index + \",name=\"+name + \", vow=\" + vow + \", temple=\" + temple + \", signIn=\" + signin + \", gradClass=\"+ gradClass);\n            if(vow===\"1master\" || vow===\"2lecturer\" || vow===\"3host\") {\n              _templeList[_templeId][\"tolHost\"] ++;\n              this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n              this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n            if(vow===\"4ahost\"){\n              _templeList[_templeId][\"tolAHost\"] ++;\n              this.setState({ tolSigninAHost: this.state.tolSigninAHost+1});\n              this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n            if(vow===\"5declass\"){\n              _templeList[_templeId][\"tolDeclass\"] ++;\n              this.setState({ tolSigninDeClass: this.state.tolSigninDeClass+1});\n              if(classMember ===\"hosts-declass\") this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n            }\n          }else if(gradClass!==undefined && gradClass!==\"\"){ //畢班,人才提拔\n            this.setState({ tolSigninClassMember: this.state.tolSigninClassMember +1 });\n          }\n        } \n      }else{ //not class member\n        //if(vow===\"6others\")   _templeList[_templeId][\"tolOthers\"] ++;\n        //console.log(\"Within requried list, but not class member=\" + name + \", vow=\" + vow + \", temple=\" + temple);\n      }\n\n      _templeList[_templeId][\"templeArr\"].push([id, name, gender, this.getVowsName(vow), signin]);\n\n      this.setState({\n        templeList: _templeList\n      });\n    });//end of forEach for _requiredAr\n    \n  }\n\n  genAttendanceSummary(gender, name){\n    switch(gender){\n      case \"乾\":\n        this.setState({tolMale: this.state.tolMale +1});\n        break;\n      case \"坤\":\n        this.setState({tolFemale: this.state.tolFemale +1});\n        break;\n      case \"童\":\n        this.setState({tolBoy: this.state.tolBoy +1});\n        break;\n      case \"女\":\n        this.setState({tolGirl: this.state.tolGirl +1});\n        break;\n      default:\n        console.log(\"! Gener not clear: \" + gender + \", name=\" + name);\n        break;\n    }\n    this.setState({tolSignin: this.state.tolSignin +1});\n  }\n\n  getDataSource(){\n    const event = this.getUrlParam(\"event\");\n    const dataYear = this.getUrlParam(\"dataYear\");\n    const eventId = this.getUrlParam(\"eventId\");\n    let systemUrl = window.location.origin, signUrl, reqUrl,    \n        today = new Date(),\n        todayDate = (today.getMonth()+1) + \"/\" + today.getDate() + \"/\" + today.getFullYear();\n    \n    if(systemUrl.indexOf(\"localhost\") === -1){\n      signUrl = systemUrl+ \"/api/v1/attendees/events/\"+ eventId +\"?action=SIGNIN\"; \n      reqUrl  = systemUrl + \"/api/v1/attendees/events/\"+ eventId +\"?action=REQUIRED\";\n    }else{\n      signUrl = \"./json/signin-\" + eventId + \".json\";\n      reqUrl = \"./json/required-\" + eventId + \".json\";\n    }\n\n    console.log(\"signurl=\"+signUrl);\n    this.setState({event: event});\n    this.setState({dataYear: dataYear});\n    \n\t\tif( event === \"temple\" ){ \n\t\t\tthis.setState({\n        eventName: \"固本圖強班\",\n        eventDate: todayDate,\n        classMemberText: \"壇主、講師、副壇主\",\n        classMember: \"hosts\"\n      });\n\t\t}else if(event === \"host\"){\n\t\t\tthis.setState({\n        eventName: \"壇主講師班\",\n        eventDate: todayDate,\n        classMemberText: \"壇主、講師、副壇主、德字班道親\",\n        classMember: \"hosts-declass\"\n      });\n\t\t}else{\n      this.setState({\n        eventName: \"畢班、人才提拔\",\n        eventDate: todayDate,\n        classMemberText: dataYear + \" 年進修班畢班班員\",\n        classMember: \"class-member\"\n      });\n    }\n    //console.log(\"eventName=\"+ event);\n\n    this.getJsonData(signUrl, (signindata) => {\n      this.getJsonData(reqUrl, (reqdata)=> {\n\n        this.jsonToObj(\"signin\",signindata, (_dataObj)=>{\n          //must have signinObj created first, then later on can check if required class member sign in or not\n          this.setState({\n            signinObj: _dataObj\n          });\n          this.jsonToObj(\"required\",reqdata, (_dataObj)=>{\n            this.setState({\n              requiredObj: _dataObj\n            });\n          });\n        });\n        this.genReqListByTemple();\n\n      });\n    });\n  }\n\n  jsonToObj(type, data, callback){\n    console.log(\"jsonToObj Type=\" + type);\n\n    let classMember= \"\", dataObj={}, dataArr=[], \n        id, name, gender, temple, templeId, vow, gradClass, vowTobe, \n        xingMing=[], zhiShan=[],peiDe=[], xingDe=[], chongDe=[],lecturer=[],\n        xingMingSum = this.state.classSummaryArr[0], //[0,0,0,0] tolReqMale = 0, tolReqFemale = 0, tolSigninMale = 0, tolSigninFemale = 0,\n        zhiShanSum = this.state.classSummaryArr[1],\n        peiDeSum = this.state.classSummaryArr[2],\n        xingDeSum = this.state.classSummaryArr[3],\n        chongDeSum = this.state.classSummaryArr[4],\n        lecturerSum = this.state.classSummaryArr[5],\n        classMemberObj={},classSummaryArr=[], \n        templeClassSummaryObj=this.state.templeClassSummaryObj;    \n        classMember = this.state.classMember;\n\n    const result = data.map( item => {\n      id = item.id;\n\t\t\tname = item.name;\n\t\t\tgender = item.gender;\n      temple = item.currentTemple;\n      vow = this.checkVows(id, type, name, item.vows, item.taoClasses);\n      gradClass = this.checkGradClass(name, item.taoClasses);\n      // console.log(\"name=\" + name);\n      // console.log(\"gradClass=\" + gradClass);\n      vowTobe = this.checkVowsTobe(gradClass,item.vows);\n      //console.log(\"vowTobe=\" + vowTobe);\n      if(temple==undefined) {\n        temple = \"其它\";\n        console.log(\"! Name=\" + name + \"--has no temple assigned, assigned to 其它 for now.\");\n      }\n\n      temple = temple.substring(0,2);\n      templeId = this.checkTempleId(temple);\n      if (temple===\"崇慧\") temple = \"沾德\";\n      //console.log(\"templeId=\" + templeId);\n      dataObj[id] = [name, gender, temple, vow, gradClass];\n      dataArr.push([id, name, gender, temple, vow, gradClass]);\n\n      if(type ===\"required\") { //班員出席統計 summary section only\n        //console.log(id + \"-Checked?\" + this.checkIfSignin(id));\n        if(classMember===\"hosts\" && vow !== \"6others\" && vow !== \"5declass\"){ //Friday\n          this.setState({tolRquired: this.state.tolRquired +1});\n        }else if(classMember ===\"hosts-declass\" && vow !== \"6others\"){ //Saturday hosts + declass\n          this.setState({tolRquired: this.state.tolRquired +1});\n        }else if(classMember===\"class-member\" && gradClass!==undefined && gradClass!==\"\"){// Sunday , only graducated class memeber\n          this.setState({tolRquired: this.state.tolRquired +1});\n          \n          //form class memeber obj, and summary\n          //console.log(\"gradClass=\" + gradClass);\n          switch(gradClass){\n            case \"1xingMing\":\n              xingMing.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              (gender===\"乾\") ? xingMingSum[2]++ : xingMingSum[3]++;\n              \n              templeClassSummaryObj[templeId][2][0][0]= \"新民\";\n              templeClassSummaryObj[templeId][2][0][1]++;\n              break;\n            case \"2zhiShan\":\n              zhiShan.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              (gender===\"乾\") ? zhiShanSum[2]++ : zhiShanSum[3]++;\n              templeClassSummaryObj[templeId][2][1][0]= \"至善\";\n              templeClassSummaryObj[templeId][2][1][1]++;\n              break;\n            case \"3peiDe\":\n              peiDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              (gender===\"乾\") ? peiDeSum[2]++ : peiDeSum[3]++;\n              templeClassSummaryObj[templeId][2][2][0]= \"培德\";\n              templeClassSummaryObj[templeId][2][2][1]++;\n              break;\n            case \"4xingDe\":\n              xingDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              (gender===\"乾\") ? xingDeSum[2]++ : xingDeSum[3]++;\n              templeClassSummaryObj[templeId][2][3][0]= \"行德\";\n              templeClassSummaryObj[templeId][2][3][1]++;\n              break;\n            case \"5chongDe\":\n              chongDe.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n              (gender===\"乾\") ? chongDeSum[2]++ : chongDeSum[3]++;\n              templeClassSummaryObj[templeId][2][4][0]= \"崇德\";\n              templeClassSummaryObj[templeId][2][4][1]++;\n              //console.log(\"required 崇德=\"+name);\n              break;\n            case \"6lecturer\":\n                lecturer.push([id, name, gender, temple, vow, gradClass, this.checkIfSignin(id), vowTobe]);\n                (gender===\"乾\") ? lecturerSum[2]++ : lecturerSum[3]++;\n                templeClassSummaryObj[templeId][2][5][0]= \"講培\";\n                templeClassSummaryObj[templeId][2][5][1]++;\n                break;  \n          }\n        }\n      }else{ //type === \"signin\"\n        this.genAttendanceSummary(gender, name); // upate 活動人數統計 summary\n\n        if(classMember===\"class-member\" && gradClass!==undefined && gradClass!==\"\"){// Sunday , only graducated class memeber\n          \n          switch(gradClass){\n            case \"1xingMing\":\n              (gender===\"乾\") ? xingMingSum[4]++ : xingMingSum[5]++;\n              templeClassSummaryObj[templeId][2][0][0]= \"新民\";\n              templeClassSummaryObj[templeId][2][0][2]++;\n              break;\n            case \"2zhiShan\":\n              (gender===\"乾\") ? zhiShanSum[4]++ : zhiShanSum[5]++;\n              templeClassSummaryObj[templeId][2][1][0]= \"至善\";\n              templeClassSummaryObj[templeId][2][1][2]++;\n              break;\n            case \"3peiDe\":\n              (gender===\"乾\") ? peiDeSum[4]++ : peiDeSum[5]++;\n              templeClassSummaryObj[templeId][2][2][0]= \"培德\";\n              templeClassSummaryObj[templeId][2][2][2]++;\n              break;\n            case \"4xingDe\":\n              (gender===\"乾\") ? xingDeSum[4]++ : xingDeSum[5]++;\n              templeClassSummaryObj[templeId][2][3][0]= \"行德\";\n              templeClassSummaryObj[templeId][2][3][2]++;\n              break;\n            case \"5chongDe\":\n              (gender===\"乾\") ? chongDeSum[4]++ : chongDeSum[5]++;\n              templeClassSummaryObj[templeId][2][4][0]= \"崇德\";\n              templeClassSummaryObj[templeId][2][4][2]++;\n              //console.log(\"signin 崇德=\"+name);\n              break;\n            case \"6lecturer\":\n                (gender===\"乾\") ? lecturerSum[4]++ : lecturerSum[5]++;\n                templeClassSummaryObj[templeId][2][5][0]= \"講培\";\n                templeClassSummaryObj[templeId][2][5][2]++;\n                break;\n          }\n        }\n      }\n    }); // end of map\n    \n    if(type===\"required\"){\n      this.setState({requiredArr: dataArr});\n    }else{\n      this.setState({signinArr: dataArr});\n    }\n\n    if (classMember===\"class-member\"){\n      if(type===\"required\"){\n        classMemberObj.xingMing = xingMing;\n        classMemberObj.zhiShan = zhiShan;\n        classMemberObj.peiDe = peiDe;\n        classMemberObj.xingDe = xingDe;\n        classMemberObj.chongDe = chongDe;\n        classMemberObj.lecturer = lecturer;\n        this.setState({classMemberObj: classMemberObj});\n        this.setState({templeClassSummaryObj: templeClassSummaryObj});\n        //console.log(\"classMemberObj=\" + JSON.stringify(classMemberObj));\n        // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n      }\n      \n      classSummaryArr[0] = xingMingSum;\n      classSummaryArr[1] = zhiShanSum;\n      classSummaryArr[2] = peiDeSum;\n      classSummaryArr[3] = xingDeSum;\n      classSummaryArr[4] = chongDeSum;\n      classSummaryArr[5] = lecturerSum;\n      this.setState({classSummaryArr: classSummaryArr});\n      this.setState({templeClassSummaryObj: templeClassSummaryObj});\n      // console.log(\"classSummaryArr=\" + JSON.stringify(classSummaryArr));\n      // console.log(\"templeClassSummaryObj=\" + JSON.stringify(templeClassSummaryObj));\n    }\n\n    //console.log(\"type:\" + type, \", inde:\"+ ++index + \", currObj=\"+dataObj[5]);\n    callback(dataObj);\n  }\n\n  checkIfSignin(id){\n    //console.log(\"id=\"+id);\n    const _signinObj = this.state.signinObj;\n    return (_signinObj[id] && _signinObj[id] !== undefined) ? \"yes\" : \"x\";\n  }\n\n  checkIfRequired(id){\n    const _requiredObj = this.state.requiredObj;\n    return (_requiredObj[id] && _requiredObj[id] !== undefined) ? \"yes\" : \"no\";\n  }\n\n  checkIfClassMember(vow, gradeClass){\n    let classMember = this.state.classMember;\n    if ((classMember ===\"hosts\" && vow !== \"5declass\" && vow !== \"6others\") || \n        (classMember ===\"hosts-declass\" && vow !== \"6others\") ||\n        (classMember ===\"class-member\" && gradeClass !== \"\" && gradeClass!== undefined) \n       )\n    {\n      return true;\n    }else{\n      return false;\n    }\n  }\n\n  checkVows(id, type, name, vows, taoClasses){\n    if(vows){\n\t\t\tif(vows[\"transmittingMaster\"]){\n\t\t\t\tif(vows[\"transmittingMaster\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"1master\";\n        };\n\t\t\t}\n\t\t\tif(vows[\"lecturer\"]){\n\t\t\t\tif(vows[\"lecturer\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"2lecturer\";\n        };\n\t\t\t}\n      if(vows[\"templeHost\"]) {\n        if(vows[\"templeHost\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninHost: this.state.tolSigninHost+1});\n          return \"3host\";\n        };\n      }\t\n      if(vows[\"assistantTempleHost\"]) {\n        if(vows[\"assistantTempleHost\"].made === true){\n          //if(type===\"signin\") this.setState({ tolSigninAHost: this.state.tolSigninAHost +1});\n          return \"4ahost\";\n        };\n      }\n    }\n\n    if(taoClasses){\n      if( (taoClasses.chongDe && taoClasses.chongDe.completed === true) ||\n          (taoClasses.xingDe && taoClasses.xingDe.completed === true) ||\n          (taoClasses.peiDe && taoClasses.peiDe.completed === true) ) {\n        //if(type===\"signin\") this.setState({ tolSigninDeClass: this.state.tolSigninDeClass +1});\n        return \"5declass\";\n      }else{ //others \n        //if(type===\"signin\") this.setState({ tolSigninOthers: this.state.tolSigninOthers +1});\n        return \"6others\";\n      }\n    }\n\t\tconsole.log(\"no vow nor declass\" + name + \": \" + vows , taoClasses);\n\t\treturn false;\n  }\n\n  checkVowsTobe(gradClass, vows){\n    if(gradClass == \"1xingMing\"){\n      if(vows!=undefined){\n        if(vows[\"taoHelper\"] && vows[\"taoHelper\"].made){\n            return \"辦事人員-已立\";\n        }else{\n          return \"辦事人員\";\n        }\n      }else{\n        return \"辦事人員\";\n      }\n    }else if(gradClass == \"2zhiShan\"){\n      if(vows !== undefined){\n        if(vows[\"assistantLecturer\"] && vows[\"assistantLecturer\"].made){\n          return \"講員-已立\";\n        }else{\n          return \"講員\";\n        }\n      }else{\n        return \"講員\";\n      }\n    }else if(gradClass == \"6lecturer\"){\n      if(vows !== undefined){\n        if(vows[\"lecturer\"] && vows[\"lecturer\"].made){\n          return \"講師-已立\";\n        }else{\n          return \"講師\";\n        }\n      }else{\n        return \"講師\";\n      }\n    }else{\n      return \"---\";\n    }\n  }\n\n  getVowsName(vow){\n    switch(vow){\n      case \"1master\":\n        return \"1點傳師\";\n      case \"2lecturer\":\n        return \"2壇主、講師\";\n      case \"3host\":\n        return \"3壇主\";\n      case \"4ahost\":\n        return \"4副壇主\";\n      case \"5declass\":\n        return \"5德字班\";\n      default:\n        return \"6其他\";\n    }\n  }\n\n  checkGradClass(name, taoClasses){\n    const dataYear = this.state.dataYear;\n    let gradClass = \"\";\n\n    if(taoClasses){\n      if(taoClasses.lecturer && taoClasses.lecturer.completed === true && taoClasses.lecturer.completionDate && taoClasses.lecturer.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"6lecturer\" ;\n      }else if(taoClasses.chongDe && taoClasses.chongDe.completed === true && taoClasses.chongDe.completionDate && taoClasses.chongDe.completionDate.substr(0, 10).includes(dataYear)) {\n        gradClass = \"5chongDe\" ;\n      }else if(taoClasses.xingDe && taoClasses.xingDe.completed === true && taoClasses.xingDe.completionDate && taoClasses.xingDe.completionDate.substr(0, 10).includes(dataYear)){\n        gradClass = \"4xingDe\";\n      }else if(taoClasses.peiDe && taoClasses.peiDe.completed === true && taoClasses.peiDe.completionDate && taoClasses.peiDe.completionDate.substr(0, 10).includes(dataYear)){\n        gradClass = \"3peiDe\";\n      }else if(taoClasses.zhiShan && taoClasses.zhiShan.completed === true && taoClasses.zhiShan.completionDate && taoClasses.zhiShan.completionDate.substr(0, 10).includes(dataYear)){\n        gradClass = \"2zhiShan\";\n      }else if(taoClasses.xingMing && taoClasses.xingMing.completed === true && taoClasses.xingMing.completionDate && taoClasses.xingMing.completionDate.substr(0, 10).includes(dataYear)){\n        gradClass = \"1xingMing\";\n      }else{ //others \n        gradClass = \"\";\n      }\n    }else{\n      console.log(\"no grad lass\" + name + \": \" , taoClasses);\n      gradClass = \"\";\n    }\n    // if(name==\"胡艷蘭\") {\n    //   console.log(\"name=\" + name + \", taoClasses=\" + JSON.stringify(taoClasses));\n    //   console.log(\"taoClasses.peiDe:\"+taoClasses.peiDe);\n    //   console.log(\"taoClasses.peiDe.completed=\"+taoClasses.peiDe.completed);\n    //   console.log(\"taoClasses.peiDe.completionDate:\"+taoClasses.peiDe.completionDate);\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10));\n    //   console.log(taoClasses.peiDe.completionDate.substr(0, 10).includes(dataYear));\n    //   console.log(\"gradClass=\"+ gradClass);\n    // }\n    return gradClass;\n  }\n\n  checkTempleId(name){\n    switch(name){\n      case \"沾德\":\n        return 0;\n        break;\n      case \"恆德\":\n        return 1;\n        break;\n      case \"同德\":\n        return 2;\n        break;\n      case \"正德\":\n        return 3;\n        break;\n      case \"儒德\":\n        return 4;\n        break;\n      case \"明德\":\n        return 5; \n        break;\n      case \"聖德\":\n        return 6;\n      case \"其它\":\n        return 7; \n        break;\n      default:\n        return 7; \n        break;          \n    }\n  }\n\n  getUrlParam(parameter){\n    let getAction=\"\", url = \"\";\n    url = new URLSearchParams(window.location.search);\n    getAction = url.get(parameter);\n    if(getAction===null){\n      alert(\"You forgot to enter event type in the URL parameter! This page wont be generating correct data! Enter ex: ?event=temple, host, class\");\n    }else{\n      return getAction;\n    }\n  }\n\n  getJsonData(_url, callback){\n    console.log(\"Json _url=\" + _url);\n    \n    fetch(_url)\n    .then(response => response.json())\n    .then(result => {\n       callback(result);\n    });\n  }\n\n  getTempleList(){\n    let systemUrl = window.location.origin, url;\n    if(systemUrl.indexOf(\"localhost\") === -1){\n      url = systemUrl + \"/static/json/templeList.json\";\n    }else{\n      url = \"./json/templeList.json\";\n    }\n    console.log(\"getTempleList=\" + url);\n\n    fetch(url)\n    .then(response => response.json())\n    .then(result => {\n      const tempList = result.map(item => {\n        return item;\n      });\n      this.setState({templeList: tempList});\n    });\n  }\n\n  componentDidMount(){\n    this.getDataSource();\n    this.getTempleList();\n  }\n\n  render(){\n    \n    return(\n      <div>\n        <div id=\"host-class\" className=\"main-container event-name\">\n          <HostHeader\n            eventName = {this.state.eventName}\n            eventDate = {this.state.eventDate}\n            classMemberText = {this.state.classMemberText}\n          />\n          <HostSummary\n            event = {this.state.event}\n            tolRquired = {this.state.tolRquired}\n            tolSigninClassMember = {this.state.tolSigninClassMember}\n            tolSigninHost = {this.state.tolSigninHost}\n            tolSigninAHost = {this.state.tolSigninAHost}\n            tolSigninDeClass = {this.state.tolSigninDeClass}\n            classSummaryArr = {this.state.classSummaryArr}\n          />\n          <HostAttendantSummary\n            eventType = {this.state.classMember}\n            tolSignin = {this.state.tolSignin}\n            tolAdult = {this.state.tolMale + this.state.tolFemale}\n            tolChildren = {this.state.tolBoy + this.state.tolGirl}\n            tolMale = {this.state.tolMale}\n            tolFemale = {this.state.tolFemale}\n            tolBoy = {this.state.tolBoy}\n            tolGirl = {this.state.tolGirl}\n            tolSigninOthers = {this.state.tolSigninOthers}\n          />\n        </div>\n        <AllAttendantRate\n          templeList = {this.state.templeList}\n          tolSignin = {this.state.tolSignin}\n        />\n        <hr/>\n        <HostAttendRate\n          templeList = {this.state.templeList}\n        />\n        <hr/>\n        <ClassAttendRate\n          event = {this.state.event}\n          templeClassSummaryObj = {this.state.templeClassSummaryObj}\n        />\n        <hr/>\n        <ClassAttendList\n          event = {this.state.event}\n          dataYear = {this.state.dataYear}\n          templeClassSummaryObj = {this.state.templeClassSummaryObj}\n          classSummaryArr = {this.state.classSummaryArr}\n          classMemberObj = {this.state.classMemberObj}\n        />\n        <hr/>\n        <HostAttendantByTemple\n          templeList = {this.state.templeList}\n        />\n      </div>\n      \n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}