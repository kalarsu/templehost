{"ast":null,"code":"var _jsxFileName = \"/Users/chisu/Sites/templehost/src/components/App.js\";\nimport React, { Component } from 'react';\nimport '../css/styles.css';\nimport HostHeader from './HostHeader';\nimport HostSummary from './HostSummary';\nimport HostAttendantSummary from './HostAttendantSummary';\nimport HostAttendRate from './HostAttendRate';\nimport HostAttendantByTemple from './HostAttendantByTemple';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      tolRquired: 0,\n      tolSignin: 0,\n      tolSigninHost: 0,\n      tolSigninAHost: 0,\n      tolSigninDeClass: 0,\n      tolSigninOthers: 0,\n      tolSigninClassMember: 0,\n      age: 0,\n      gender: \"\",\n      tolMale: 0,\n      tolFemale: 0,\n      tolBoy: 0,\n      tolGirl: 0,\n      requiredArr: [],\n      signinArr: [],\n      zanDe: [],\n      henDe: [],\n      tonDe: [],\n      zenDe: [],\n      zuDe: [],\n      minDe: [],\n      sanDe: [],\n      hanDe: [],\n      zanWa: [],\n      otherTemple: [],\n      xingMing: [],\n      zhiShan: [],\n      peiDe: [],\n      xingDe: [],\n      chongDe: [],\n      requiredObj: {},\n      signinObj: {},\n      vowToBeObj: {},\n      classMember: \"\",\n      zanDeReq: 0,\n      henDeReq: 0,\n      tonDeReq: 0,\n      zenDeReq: 0,\n      zuDeReq: 0,\n      minDeReq: 0,\n      sanDeReq: 0,\n      hanDeReq: 0,\n      zanWaReq: 0,\n      othersReq: 0,\n      zanDeSignin: 0,\n      henDeSignin: 0,\n      tonDeSignin: 0,\n      zenDeSignin: 0,\n      zuDeSignin: 0,\n      minDeSignin: 0,\n      sanDeSignin: 0,\n      hanDeSignin: 0,\n      zanWaSignin: 0,\n      othersSignin: 0\n    };\n    this.getJsonData = this.getJsonData.bind(this);\n    this.getDataSource = this.getDataSource.bind(this);\n    this.checkVows = this.checkVows.bind(this);\n    this.jsonToObj = this.jsonToObj.bind(this);\n    this.checkGradClass = this.checkGradClass.bind(this);\n    this.genClassMemAttendSummary = this.genClassMemAttendSummary.bind(this);\n  }\n\n  genClassMemAttendSummary(vow) {\n    console.log(\"vow=\" + vow);\n    console.log(\"currentCount=\" + this.state.tolRquired);\n\n    if (vow !== \"6others\" && vow !== \"5declass\") {\n      this.setState({\n        tolRquired: this.state.tolRquired + 1\n      });\n      console.log(\"addCount=\" + this.state.tolRquired);\n    }\n\n    console.log(\"-----------\");\n  }\n\n  getDataSource() {\n    let signUrl, reqUrl;\n\n    if (document.getElementById(\"setup-Temple-class\") != null) {\n      //Friday \n      signUrl = \"signin5\";\n      reqUrl = \"required5\";\n      this.setState({\n        classMember: \"hosts\"\n      });\n    } else if (document.getElementById(\"host-class\") != null) {\n      //Saturday\n      signUrl = \"signin6\";\n      reqUrl = \"required6\";\n      this.setState({\n        classMember: \"hosts\"\n      });\n    } else {\n      //Sunday \n      signUrl = \"signin7\";\n      reqUrl = \"required7\";\n      this.setState({\n        classMember: \"class-member\"\n      }); //getVowToBeData();\n    }\n\n    this.getJsonData(signUrl, signindata => {\n      this.getJsonData(reqUrl, reqdata => {\n        this.setState({\n          requiredObj: this.jsonToObj(\"required\", reqdata),\n          signinObj: this.jsonToObj(\"signin\", signindata)\n        });\n      });\n    });\n  }\n\n  jsonToObj(type, data) {\n    let index = 0,\n        dataObj = {},\n        dataArr = [],\n        id,\n        name,\n        gender,\n        temple,\n        vow,\n        gradClass;\n    const result = data.map(item => {\n      console.log(\"index=\" + ++index);\n      dataArr.id = id = item.id;\n      dataArr.name = name = item.name;\n      dataArr.gender = gender = item.gender;\n      dataArr.temple = temple = item.currentTemple;\n      dataArr.vow = vow = this.checkVows(name, item.vows, item.taoClasses);\n      dataArr.gradClass = gradClass = this.checkGradClass(name, item.taoClasses);\n      dataObj[id] = [name, gender, temple, vow, gradClass];\n      this.genClassMemAttendSummary(vow);\n      return dataArr;\n    });\n\n    if (type === \"required\") {\n      this.setState({\n        requiredArr: result\n      });\n    } else {\n      this.setState({\n        signinArr: result\n      });\n    }\n\n    return dataObj;\n  }\n\n  checkVows(name, vows, taoClasses) {\n    if (vows) {\n      if (vows[\"transmittingMaster\"]) {\n        if (vows[\"transmittingMaster\"].made === true) {\n          return \"1master\";\n        }\n\n        ;\n      }\n\n      if (vows[\"lecturer\"]) {\n        if (vows[\"lecturer\"].made === true) {\n          return \"2lecturer\";\n        }\n\n        ;\n      }\n\n      if (vows[\"templeHost\"]) {\n        if (vows[\"templeHost\"].made === true) {\n          return \"3host\";\n        }\n\n        ;\n      }\n\n      if (vows[\"assistantTempleHost\"]) {\n        if (vows[\"assistantTempleHost\"].made === true) {\n          return \"4ahost\";\n        }\n\n        ;\n      }\n    }\n\n    if (taoClasses) {\n      if (taoClasses.chongDe && taoClasses.chongDe.completed === true) {\n        return \"5declass\";\n      } else if (taoClasses.xingDe && taoClasses.xingDe.completed === true) {\n        return \"5declass\";\n      } else if (taoClasses.peiDe && taoClasses.peiDe.completed === true) {\n        return \"5declass\";\n      } else {\n        //others \n        return \"6others\";\n      }\n    }\n\n    console.log(\"no vow nor declass\" + name + \": \" + vows, taoClasses);\n    return false;\n  }\n\n  checkGradClass(name, taoClasses) {\n    if (taoClasses) {\n      if (taoClasses.chongDe && taoClasses.chongDe.completed === true && taoClasses.chongDe.completionDate) {\n        if (taoClasses.chongDe.completionDate.substr(0, 10) === \"2018-12-09\") return \"5chongDe\";\n      } else if (taoClasses.xingDe && taoClasses.xingDe.completed === true && taoClasses.xingDe.completionDate) {\n        if (taoClasses.xingDe.completionDate.substr(0, 10) === \"2018-12-09\") return \"4xingDe\";\n      } else if (taoClasses.peiDe && taoClasses.peiDe.completed === true && taoClasses.peiDe.completionDate) {\n        if (taoClasses.peiDe.completionDate.substr(0, 10) === \"2018-12-09\") return \"3peiDe\";\n      } else if (taoClasses.zhiShan && taoClasses.zhiShan.completed === true && taoClasses.zhiShan.completionDate) {\n        if (taoClasses.zhiShan.completionDate.substr(0, 10) === \"2018-12-09\") return \"2zhiShan\";\n      } else if (taoClasses.xingMing && taoClasses.xingMing.completed === true && taoClasses.xingMing.completionDate) {\n        if (taoClasses.xingMing.completionDate.substr(0, 10) === \"2018-12-09\") return \"1xingMing\";\n      } else {\n        //others \n        return \"\";\n      }\n    } else {\n      console.log(\"no grad lass\" + name + \": \", taoClasses);\n      return false;\n    }\n  }\n\n  getJsonData(_url, callback) {\n    fetch('./json/' + _url + '.json').then(response => response.json()).then(result => {\n      callback(result);\n    });\n  }\n\n  componentDidMount() {\n    this.getDataSource();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"host-class\",\n      className: \"main-container event-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(HostHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(HostSummary, {\n      tolRquired: this.state.tolRquired,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(HostAttendantSummary, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    })), React.createElement(HostAttendRate, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(HostAttendantByTemple, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/chisu/Sites/templehost/src/components/App.js"],"names":["React","Component","HostHeader","HostSummary","HostAttendantSummary","HostAttendRate","HostAttendantByTemple","App","constructor","state","tolRquired","tolSignin","tolSigninHost","tolSigninAHost","tolSigninDeClass","tolSigninOthers","tolSigninClassMember","age","gender","tolMale","tolFemale","tolBoy","tolGirl","requiredArr","signinArr","zanDe","henDe","tonDe","zenDe","zuDe","minDe","sanDe","hanDe","zanWa","otherTemple","xingMing","zhiShan","peiDe","xingDe","chongDe","requiredObj","signinObj","vowToBeObj","classMember","zanDeReq","henDeReq","tonDeReq","zenDeReq","zuDeReq","minDeReq","sanDeReq","hanDeReq","zanWaReq","othersReq","zanDeSignin","henDeSignin","tonDeSignin","zenDeSignin","zuDeSignin","minDeSignin","sanDeSignin","hanDeSignin","zanWaSignin","othersSignin","getJsonData","bind","getDataSource","checkVows","jsonToObj","checkGradClass","genClassMemAttendSummary","vow","console","log","setState","signUrl","reqUrl","document","getElementById","signindata","reqdata","type","data","index","dataObj","dataArr","id","name","temple","gradClass","result","map","item","currentTemple","vows","taoClasses","made","completed","completionDate","substr","_url","callback","fetch","then","response","json","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/styles.css';\nimport HostHeader from './HostHeader';\nimport HostSummary from './HostSummary';\nimport HostAttendantSummary from './HostAttendantSummary';\nimport HostAttendRate from './HostAttendRate';\nimport HostAttendantByTemple from './HostAttendantByTemple';\n\nclass App extends Component{\n  constructor(){\n    super();\n    this.state = {\n      tolRquired : 0, tolSignin : 0, tolSigninHost : 0, tolSigninAHost : 0,\n      tolSigninDeClass : 0, tolSigninOthers : 0, tolSigninClassMember : 0,\n      age : 0, gender : \"\", tolMale : 0, tolFemale : 0 , tolBoy : 0, tolGirl : 0,\n      requiredArr: [], signinArr: [],\n      zanDe: [], henDe: [], tonDe: [], zenDe: [], zuDe: [], minDe: [], sanDe: [], \n      hanDe: [], zanWa: [],otherTemple: [], xingMing: [], zhiShan: [], peiDe: [], \n      xingDe: [], chongDe: [],\n      requiredObj: {}, signinObj: {}, vowToBeObj: {},\n      classMember: \"\", \n      zanDeReq: 0, henDeReq: 0, tonDeReq: 0, zenDeReq: 0, zuDeReq: 0, minDeReq: 0,\n      sanDeReq: 0, hanDeReq: 0, zanWaReq: 0, othersReq: 0,\n      zanDeSignin: 0, henDeSignin: 0, tonDeSignin: 0, zenDeSignin: 0, zuDeSignin: 0,\n      minDeSignin: 0, sanDeSignin: 0, hanDeSignin: 0, zanWaSignin: 0, othersSignin: 0\n    }\n\n    this.getJsonData = this.getJsonData.bind(this);\n    this.getDataSource = this.getDataSource.bind(this);\n    this.checkVows = this.checkVows.bind(this);\n    this.jsonToObj = this.jsonToObj.bind(this);\n    this.checkGradClass = this.checkGradClass.bind(this);\n    this.genClassMemAttendSummary = this.genClassMemAttendSummary.bind(this);\n  }\n\n  genClassMemAttendSummary(vow){\n    console.log(\"vow=\"+vow);\n    console.log(\"currentCount=\"+ this.state.tolRquired);\n    if(vow !== \"6others\" && vow !== \"5declass\"){\n      this.setState({tolRquired: this.state.tolRquired +1});\n      console.log(\"addCount=\"+ this.state.tolRquired);\n    }\n    console.log(\"-----------\");\n  }\n\n  getDataSource(){\n    let signUrl, reqUrl;\n    \n\t\tif( document.getElementById(\"setup-Temple-class\") != null ){ //Friday \n\t\t\tsignUrl = \"signin5\";\n\t\t\treqUrl = \"required5\";\n\t\t\tthis.setState({\n        classMember: \"hosts\"\n      });\n\t\t}else if(document.getElementById(\"host-class\") != null){ //Saturday\n\t\t\tsignUrl = \"signin6\";\n\t\t\treqUrl = \"required6\";\n\t\t\tthis.setState({\n        classMember: \"hosts\"\n      });\n\t\t}else{ //Sunday \n\t\t\tsignUrl = \"signin7\";\n\t\t\treqUrl = \"required7\";\n      this.setState({\n        classMember: \"class-member\"\n      });\n\t\t\t//getVowToBeData();\n    }\n\n    this.getJsonData(signUrl, (signindata) => {\n      this.getJsonData(reqUrl, (reqdata)=> {\n        this.setState({\n          requiredObj: this.jsonToObj(\"required\",reqdata),\n          signinObj: this.jsonToObj(\"signin\",signindata)\n        });\n      });\n    });\n  }\n\n  jsonToObj(type,data){\n    let index=0, dataObj={}, dataArr=[], id, name, gender, temple, vow, gradClass;\n    const result = data.map( item => {\n      console.log(\"index=\"+ ++index);\n      dataArr.id = id = item.id;\n\t\t\tdataArr.name = name = item.name;\n\t\t\tdataArr.gender = gender = item.gender;\n\t\t\tdataArr.temple = temple = item.currentTemple;\n      dataArr.vow = vow = this.checkVows(name, item.vows, item.taoClasses);\n      dataArr.gradClass = gradClass = this.checkGradClass(name, item.taoClasses);\n      dataObj[id] = [name, gender, temple, vow, gradClass];\n      this.genClassMemAttendSummary(vow);\n      return dataArr;\n    });\n    if(type===\"required\"){\n      this.setState({requiredArr: result});\n    }else{\n      this.setState({signinArr: result});\n    }\n    return dataObj;\n  }\n\n  checkVows(name, vows, taoClasses){\n    if(vows){\n\t\t\tif(vows[\"transmittingMaster\"]){\n\t\t\t\tif(vows[\"transmittingMaster\"].made === true){\n    \t\t\t\treturn \"1master\";\n    \t\t\t};\n\t\t\t}\n\t\t\tif(vows[\"lecturer\"]){\n\t\t\t\tif(vows[\"lecturer\"].made === true){\n    \t\t\t\treturn \"2lecturer\";\n    \t\t\t};\n\t\t\t}\n      if(vows[\"templeHost\"]) {\n        if(vows[\"templeHost\"].made === true){\n          return \"3host\";\n        };\n      }\t\n      if(vows[\"assistantTempleHost\"]) {\n        if(vows[\"assistantTempleHost\"].made === true){\n          return \"4ahost\";\n        };\n      }\n    }\n\n    if(taoClasses){\n      if(taoClasses.chongDe && taoClasses.chongDe.completed === true) {\n        return \"5declass\";\n      }else if(taoClasses.xingDe && taoClasses.xingDe.completed === true){\n        return \"5declass\";\n      }else if(taoClasses.peiDe && taoClasses.peiDe.completed === true){\n        return \"5declass\";\n      }else{ //others \n        return \"6others\";\n      }\n    }\n\n\t\tconsole.log(\"no vow nor declass\" + name + \": \" + vows , taoClasses);\n\t\treturn false;\n  }\n\n  checkGradClass(name, taoClasses){\n    if(taoClasses){\n      if(taoClasses.chongDe && taoClasses.chongDe.completed === true && taoClasses.chongDe.completionDate) {\n        if (taoClasses.chongDe.completionDate.substr(0, 10) === \"2018-12-09\") return \"5chongDe\";\n      }else if(taoClasses.xingDe && taoClasses.xingDe.completed === true && taoClasses.xingDe.completionDate){\n        if (taoClasses.xingDe.completionDate.substr(0, 10)===\"2018-12-09\") return \"4xingDe\";\n      }else if(taoClasses.peiDe && taoClasses.peiDe.completed === true && taoClasses.peiDe.completionDate){\n        if (taoClasses.peiDe.completionDate.substr(0, 10)===\"2018-12-09\") return \"3peiDe\";\n      }else if(taoClasses.zhiShan && taoClasses.zhiShan.completed === true && taoClasses.zhiShan.completionDate){\n        if (taoClasses.zhiShan.completionDate.substr(0, 10)===\"2018-12-09\") return \"2zhiShan\";\n      }else if(taoClasses.xingMing && taoClasses.xingMing.completed === true && taoClasses.xingMing.completionDate){\n        if (taoClasses.xingMing.completionDate.substr(0, 10)===\"2018-12-09\") return \"1xingMing\";\n      }else{ //others \n        return \"\";\n      }\n    }else{\n      console.log(\"no grad lass\" + name + \": \" , taoClasses);\n      return false;\n    }\n  }\n\n  getJsonData(_url, callback){\n    fetch('./json/'+_url + '.json')\n    .then(response => response.json())\n    .then(result => {\n       callback(result);\n    });\n  }\n\n  componentDidMount(){\n    this.getDataSource();\n  }\n\n  render(){\n    return(\n      <div>\n        <div id=\"host-class\" className=\"main-container event-name\">\n          <HostHeader/>\n          <HostSummary\n            tolRquired = {this.state.tolRquired}\n          />\n          <HostAttendantSummary/>\n        </div>\n        <HostAttendRate/>\n        <HostAttendantByTemple/>\n      </div>\n      \n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}